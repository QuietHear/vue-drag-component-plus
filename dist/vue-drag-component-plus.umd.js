(function(t,he){typeof exports=="object"&&typeof module<"u"?module.exports=he(require("vue")):typeof define=="function"&&define.amd?define(["vue"],he):(t=typeof globalThis<"u"?globalThis:t||self,t.vueDragComponentPlus=he(t.Vue))})(this,function(t){"use strict";const he={__name:"icon",props:{iconObj:{type:Object,requured:!0}},setup(d){return(k,V)=>{const b=t.resolveComponent("el-icon");return d.iconObj.type==="custom"?(t.openBlock(),t.createBlock(t.resolveDynamicComponent(d.iconObj.icon),t.normalizeProps(t.mergeProps({key:0},d.iconObj.attrs)),null,16)):d.iconObj.type==="el"?(t.openBlock(),t.createBlock(b,t.normalizeProps(t.mergeProps({key:1},d.iconObj.attrs)),{default:t.withCtx(()=>[(t.openBlock(),t.createBlock(t.resolveDynamicComponent(d.iconObj.icon)))]),_:1},16)):d.iconObj.type==="iconfont"?(t.openBlock(),t.createElementBlock("i",t.mergeProps({key:2,class:["icon iconfont","icon-"+d.iconObj.icon]},d.iconObj.attrs),null,16)):(t.openBlock(),t.createElementBlock("i",t.mergeProps({key:3,class:d.iconObj.type},d.iconObj.attrs),t.toDisplayString(d.iconObj.icon),17))}}},it=(d,k={x:"x",y:"y",width:"width",height:"height"})=>{let V=null;return d instanceof Array?(V=[],d.forEach(b=>{typeof b[k.x]=="number"&&typeof b[k.y]=="number"&&typeof b[k.width]=="number"&&typeof b[k.height]=="number"&&V.push({x:b[k.x],y:b[k.y],width:b[k.width],height:b[k.height]})})):typeof d[k.width]=="number"&&typeof d[k.height]=="number"&&(V={width:d[k.width],height:d[k.height]}),V},Mt=d=>{const k=new Map;return d.forEach(V=>{k.has(V.x)||k.set(V.x,[]),k.get(V.x).push(V)}),k},bt=(d,k)=>d.filter(V=>V.x<=k.x&&V.x+V.width>k.x||V.x>k.x&&V.x<k.x+k.width),Et=(d,k,V,b=!1)=>{if(k.width>V)return null;let x=[];if(d.length===0){const G={x:0,y:0};return b?[G]:G}const T=Math.max(...d.map(G=>G.y+G.height)),B=new Set([0]);d.forEach(G=>{B.add(G.y),B.add(G.y+G.height)});const Xe=Array.from(B).sort((G,f)=>G-f);for(const G of Xe){const f=G+k.height;if(f>T)continue;const F=d.filter(s=>s.y<f&&s.y+s.height>G);if(F.length===0){const s={x:0,y:G};if(!b)return s;x.push(s);continue}const I=F.map(s=>[s.x,s.x+s.width]);I.sort((s,le)=>s[0]-le[0]);const P=[];let[L,K]=I[0];for(let s=1;s<I.length;s++){const[le,R]=I[s];le<=K?K=Math.max(K,R):(P.push([L,K]),[L,K]=[le,R])}if(P.push([L,K]),P[0][0]>=k.width){const s={x:0,y:G};if(!b)return s;x.push(s)}let z=P[0][1];for(let s=1;s<P.length;s++){if(P[s][0]-z>=k.width){const R={x:z,y:G};if(!b)return R;x.push(R)}z=Math.max(z,P[s][1])}if(V-z>=k.width){const s={x:z,y:G};if(!b)return s;x.push(s)}}return b?(Mt(x).forEach((f,F)=>{if(f.length>1)for(let I=0;I<f.length-1;I++){let P={...k,...f[I]};bt(d.filter(L=>L.y>=P.y+P.height&&L.y<=f[I+1].y),P).length===0&&(x=x.filter(L=>!(L.x===f[I+1].x&&L.y===f[I+1].y)),f.splice(I,1),I--)}}),x.sort((f,F)=>f.y!==F.y?f.y-F.y:f.x-F.x),x.length===0?null:x):null},hl="",mt=["onMousedown","onMouseenter","onMouseleave"],St={class:"com-item-box"},Bt=["title"],Ct={class:"com-item-box-content"},Dt=["onClick"],Pt=["onClick"],Nt=["onClick"],zt={key:1,class:"com-item-box-content"},It=["onClick"],Vt=["onClick"],Tt=["onClick"],Gt=["onClick"],At=["onClick"],Ot=["onClick"],Lt=["onClick"],Rt=["onClick"],Ht=["onClick"],Yt=["onClick"],Xt=["onMousedown"],$t=["onMousedown"],Wt=["onMousedown"],Ft=["onMousedown"],Kt=["onMousedown"],qt=["onMousedown"],Ut=["onMousedown"],Jt=["onMousedown"],Qt={key:2,class:"com-empty"},Zt=[{__name:"index",props:{insertResizeKeys:{type:Array,default:()=>["topLeft","top","topRight","left","right","bottomLeft","bottom","bottomRight"]},excludeResizeKeys:{type:Array,default:()=>[]},mobileDragModel:{type:Boolean,default:!1},seeModel:{type:Boolean,default:!1},seeModelMinBg:{type:Number,default:50,validator(d,k){return d>=0}},itemMinWidth:{type:Number,default:50,validator(d,k){return d>=20}},itemMinHeight:{type:Number,default:50,validator(d,k){return d>=20}},xSpace:{type:Number,default:10,validator(d,k){return d>=0}},ySpace:{type:Number,default:null,validator(d,k){return d>=0}},hScaleDiscount:{type:Number,default:.2,validator(d,k){return d>0}},cssScaleMin:{type:Number,default:.75,validator(d,k){return d>0}},cssScaleMax:{type:Number,default:1.2,validator(d,k){return d>0&&d>=(k?k.cssScaleMin:.1)}},settingIcon:{type:Object,default:()=>({icon:"设置"})},hideTit:{type:Boolean,default:!1},showAuxiliary:{type:Boolean,default:!1},groupBtnPosMore:{type:Boolean,default:!1},beforeAddGroup:{type:Function,default:d=>d},beforeRemoveGroup:{type:Function,default:d=>d},dragDelayTime:{type:Number,default:200,validator(d,k){return d>=0&&d<1e3}},moveDistance:{type:[Number,String],default:"50px"},scrollDistance:{type:[Number,String],default:"20px"}},emits:["baseWidthInit","changeScale","changeCssScale","changeTrimModel","dragStart","dragIng","dragEnd","resizeStart","resizeIng","resizeEnd","showGroup","openSetMenu","updateChecked","showTitPop","domStart","domReady"],setup(d,{expose:k,emit:V}){const b=V,x=d,T=l=>{if(typeof l=="object"&&!t.isVNode(l)&&l!==null&&!(l instanceof Date)){let o=l instanceof Array?[]:{};for(let e in l)o[e]=typeof l[e]=="object"&&!t.isVNode(l[e])&&l[e]!==null&&!(l[e]instanceof Date)?T(l[e]):l[e];return o}else return l},B=l=>{let o={};if(l instanceof Array)o=[],l.forEach(e=>{o.push(B(e))});else for(let e in l)["id","move","drag","itemMinWidth","width","s_width","itemMinHeight","height","s_height","x","s_x","y","s_y","isGroup","groupTit","groupData","inGroupId","groupW","groupH","groupX","groupY"].indexOf(e)!==-1&&(e==="groupData"?o[e]=B(l[e]):o[e]=l[e]);return o},Xe=(l,o)=>{let e=l.matches||l.webkitMatchesSelector||l.mozMatchesSelector||l.msMatchesSelector;for(;l&&!e.call(l,o);)l=l.parentElement;return l},G=(l,o)=>l.classList?l.classList.contains(o):new RegExp("\\s"+o+"\\s").test(" "+l.className+" "),f=l=>parseFloat(l.toFixed(7)),F=(l,o)=>{let e=[],n=r=>{r.forEach(i=>{G(i,o)&&e.push(i),i.childNodes&&i.childNodes.length>0&&n(i.childNodes)})};return n(l.childNodes),e},I=(l,o,e=!1)=>L(P(l,o,e),o,e),P=(l,o,e=!1)=>l.filter(n=>f(n[e?"s_x":"x"])<=f(o[e?"s_x":"x"])&&f(n[e?"s_x":"x"]+n[e?"s_width":"width"])>f(o[e?"s_x":"x"])||f(n[e?"s_x":"x"])>f(o[e?"s_x":"x"])&&f(n[e?"s_x":"x"])<f(o[e?"s_x":"x"]+o[e?"s_width":"width"])),L=(l,o,e=!1)=>l.filter(n=>f(n[e?"s_y":"y"])<=f(o[e?"s_y":"y"])&&f(n[e?"s_y":"y"]+n[e?"s_height":"height"])>f(o[e?"s_y":"y"])||f(n[e?"s_y":"y"])>f(o[e?"s_y":"y"])&&f(n[e?"s_y":"y"])<f(o[e?"s_y":"y"]+o[e?"s_height":"height"])),K=(l,o=n=>n,e=!1)=>{const n=B(s.value),r=B(l);r.sort((y,g)=>{const M=f(y[e?"s_y":"y"]),E=f(g[e?"s_y":"y"]);if(M!==E)return M-E;{const p=f(y[e?"s_x":"x"]),C=f(g[e?"s_x":"x"]);return p-C}});const i=y=>{I(o(n,y),y,e).forEach(M=>{M[e?"s_y":"y"]=y[e?"s_y":"y"]+y[e?"s_height":"height"],i(M)})};r.forEach(y=>i(n.filter(g=>g.id===y.id)[0])),n.forEach(y=>{s.value.filter(g=>g.id===y.id)[0][e?"s_y":"y"]=y[e?"s_y":"y"]})},z=l=>{const o=T(l);return delete o.showPop,delete o.showSet,o.groupData?o.groupData.forEach(e=>{delete e.showPop,delete e.showSet,ie(e,o),delete e.s_width,delete e.s_height,delete e.s_x,delete e.s_y}):o.inGroupId&&(delete o.showPop,delete o.showSet,ie(o,s.value.filter(e=>e.id===o.inGroupId)[0])),delete o.btnPosition,delete o.s_width,delete o.s_height,delete o.s_x,delete o.s_y,delete o.syCopy,o},s=t.ref([]),le=()=>{x.insertResizeKeys.forEach(l=>{x.excludeResizeKeys.indexOf(l)===-1&&R.value.push(l)})};t.watch(()=>[x.insertResizeKeys,x.excludeResizeKeys],()=>{le()});const R=t.ref([]);le();const ct=()=>{s.value.length>0&&s.value.filter(l=>l.isGroup===!0).forEach(l=>{ae(l)})},ut=()=>{x.xSpace!==null&&x.xSpace!==void 0?O.value=x.xSpace/2:O.value=10/2,x.ySpace!==null&&x.ySpace!==void 0&&x.ySpace>=0?q.value=x.ySpace/2:q.value=O.value,ct()};t.watch(()=>[x.xSpace,x.ySpace],()=>{ut()});const O=t.ref(0),q=t.ref(0);ut();const H=t.ref(null);let j=null;const ke=l=>{j=l,b("baseWidthInit",j)},J=t.ref(1),ve=t.ref(1),de=l=>{J.value=l,l<x.cssScaleMin?ve.value=x.cssScaleMin:l>x.cssScaleMax?ve.value=x.cssScaleMax:ve.value=l,b("changeScale",J.value),b("changeCssScale",x.seeModel?ve.value:1)},X=()=>1+(J.value-1)*x.hScaleDiscount;t.watch(()=>x.seeModel,()=>{de(J.value)});const ae=(l,o=null)=>{o?(l.width=l.width*o,l.height=l.height*o):(l.s_width=l.width*J.value,l.s_height=l.height*X());const e=getComputedStyle(H.value),n=parseInt(e.getPropertyValue("--com-item-border-width").trim()),r=parseInt(e.getPropertyValue("--group-tit-height").trim());if(l.isGroup===!0)if(o){const i=l.width,y=l.height-(l.groupTit?r:0);l.groupData.forEach(g=>{g.width=i*g.groupW,g.height=y*g.groupH,g.x=i*g.groupX,g.y=y*g.groupY})}else{const i=l.s_width-2*O.value-2*n,y=l.s_height-2*q.value-2*n-(l.groupTit?r:0);l.groupData.forEach(g=>{g.s_width=i*g.groupW,g.s_height=y*g.groupH,g.s_x=i*g.groupX,g.s_y=y*g.groupY})}},ht=(l,o=null)=>{o?(l.s_x=l.x*o,l.s_y=l.y*o):(l.s_x=l.x*J.value,l.s_y=l.y*X())},jt=l=>{l.width=l.s_width/J.value,l.height=l.s_height/X();const o=getComputedStyle(H.value),e=parseInt(o.getPropertyValue("--group-tit-height").trim());if(l.isGroup===!0){const n=l.width,r=l.height-(l.groupTit?e:0);l.groupData.forEach(i=>{i.x=n*i.groupX,i.y=r*i.groupY})}},fe=l=>{l.x=l.s_x/J.value,l.y=l.s_y/X()};let oe=null,dt=null;const re=t.ref(0),Me=t.ref(null),be=t.ref(null),Ee=t.ref(null),me=t.ref(null),Se=t.ref(null),Be=t.ref(null),ce=l=>{const o=B(l);if(!x.showAuxiliary||l===null)Me.value=null,be.value=null,Ee.value=null,me.value=null,Se.value=null,Be.value=null;else{const e=getComputedStyle(H.value),n=parseInt(e.getPropertyValue("--auxiliary-width").trim()),r=s.value.filter(c=>c.id!==o.id).filter(c=>Math.round(c.s_x)<Math.round(o.s_x)&&Math.round(c.s_x+c.s_width)<=Math.round(o.s_x)||Math.round(c.s_x)>=Math.round(o.s_x+o.s_width)),i=r.map(c=>Math.round(c.s_y)),y=r.map(c=>Math.round(c.s_y+c.s_height/2)),g=r.map(c=>Math.round(c.s_y+c.s_height)),M=[...i,...y,...g];M.sort(),M.filter(c=>c===Math.round(o.s_y)).length>0?Me.value=o.s_y:Me.value=null,M.filter(c=>c===Math.round(o.s_y+o.s_height/2)).length>0?be.value=o.s_y+o.s_height/2:be.value=null,M.filter(c=>c===Math.round(o.s_y+o.s_height)).length>0?Ee.value=o.s_y+o.s_height-n:Ee.value=null;const E=s.value.filter(c=>c.id!==o.id).map(c=>Math.round(c.s_x)),p=s.value.filter(c=>c.id!==o.id).map(c=>Math.round(c.s_x+c.s_width/2)),C=s.value.filter(c=>c.id!==o.id).map(c=>Math.round(c.s_x+c.s_width)),m=[...E,...p,...C];m.sort(),m.filter(c=>c===Math.round(o.s_x)).length>0?me.value=o.s_x:me.value=null,m.filter(c=>c===Math.round(o.s_x+o.s_width/2)).length>0?Se.value=o.s_x+o.s_width/2:Se.value=null,m.filter(c=>c===Math.round(o.s_x+o.s_width)).length>0?Be.value=o.s_x+o.s_width-n:Be.value=null}},pe=()=>{window.removeEventListener("keydown",pe),_!==null?Ae():v!==null&&Qe()},Y=t.ref(!1),$e=l=>{let o=null;if(o=s.value.filter(e=>e.id===l)[0],o&&o.static!==!0&&o.dragable!==!1)Y.value=!0,pt(s.value.findIndex(e=>e.id===l)),setTimeout(()=>{window.addEventListener("click",Ce),window.addEventListener("keydown",We)},50),b("changeTrimModel",Y.value,z(s.value.filter(e=>e.id===o.id)[0]));else try{}catch{}},We=l=>{switch(l.keyCode){case 13:case 27:case 32:l.preventDefault(),Ce();break;case 37:l.preventDefault(),_e("left");break;case 38:l.preventDefault(),_e("top");break;case 39:l.preventDefault(),_e("right");break;case 40:l.preventDefault(),_e("bottom");break}},Ce=()=>{window.removeEventListener("click",Ce),window.removeEventListener("keydown",We),Ae(),Y.value=!1,b("changeTrimModel",Y.value)},a=t.ref({});let _=null,Fe=null,Ke=null,qe=null,ee=null;const $=t.ref(null);let ft=null,Ge=null,Ue=null,Je=null,ge=null,te=null,ue=null,ye=null;const De=()=>{clearInterval(ue),ue=null,ye=null},pt=(l,o)=>{clearTimeout(qe),clearTimeout(ee),De(),Ve();const e=$.value.getBoundingClientRect();if(ft=e.left,Ge=e.top,Ue=e.bottom,Je=e.height,typeof x.moveDistance=="string"?ge=x.moveDistance.indexOf("px")!==-1?parseFloat(x.moveDistance):50:ge=x.moveDistance*Je,typeof x.scrollDistance=="string"?te=x.scrollDistance.indexOf("px")!==-1?parseFloat(x.scrollDistance):20:te=x.scrollDistance*Je,Y.value)ee=null,_=l,a.value=B(s.value[_]),b("dragStart",z(s.value[_])),s.value[_].move=!0,ce(s.value[_]),Fe=0,Ke=0;else{const n=Xe(l.target,".com-item");n&&(ee=setTimeout(()=>{ee=null,_=o,a.value=B(s.value[_]),b("dragStart",z(s.value[_])),s.value[_].move=!0,ce(s.value[_]);const r=n.getBoundingClientRect();Fe=l.clientX-r.left,Ke=l.clientY-r.top,window.addEventListener("mousemove",_e),window.addEventListener("keydown",pe)},x.dragDelayTime),window.addEventListener("mouseup",Ae))}},_e=l=>{clearTimeout(qe),clearTimeout(ee),ee=null;let o=null,e=null;if(Y.value)switch(o=s.value[_].s_x,e=s.value[_].s_y,l){case"top":e-=1;break;case"bottom":e+=1;break;case"left":o-=1;break;case"right":o+=1;break}else o=l.clientX-ft-Fe,e=l.clientY-Ge+$.value.scrollTop-Ke;const n=o<=ne("left")?ne("left"):o>=ne("right")?ne("right"):o;let r=e<=ne("top")?ne("top"):e>=ne("bottom")?ne("bottom"):e;const i=n-s.value[_].s_x,y=r-s.value[_].s_y;let g="";i>0?g="right":i<0?g="left":y>0?g="bottom":y<0&&(g="top"),s.value[_].s_x=n,s.value[_].s_y=r;const M=()=>{let E=I(B(s.value.filter(p=>p.move!==!0)),s.value[_],!0);if(E.length===0)a.value.s_x=n,a.value.s_y=r;else switch(g){case"top":const p=T(a.value);p.s_x=n,I(B(s.value.filter(u=>u.move!==!0)),p,!0).length===0&&(a.value.s_x=n);const C=E.filter(u=>x.mobileDragModel?f(u.s_height+u.s_y-r)>2*q.value:s.value[_].s_height>=u.s_height&&r-u.s_y<=15||s.value[_].s_height<u.s_height&&r-u.s_y<=s.value[_].s_height/2);if(C.length>0){const u=P(B(s.value.filter(w=>w.move!==!0&&f(w.s_y+w.s_height)<=f(a.value.s_y)&&C.filter(S=>S.id===w.id).length===0)),a.value,!0);let h=s.value[_].s_height;if(u.length===0&&(h-=Math.min(...C.map(w=>w.s_y))),E.length===C.length?a.value.s_y=u.length===0?0:Math.max(...u.map(w=>w.s_y+w.s_height)):a.value.s_y=Math.max(...u.map(w=>w.s_y+w.s_height)),a.value.s_x=n,h>0){const w=T(C);C.forEach(S=>{P(s.value.filter(A=>A.move!==!0&&f(A.s_y)>=f(S.s_y+S.s_height)),S,!0).forEach(A=>{w.filter(st=>st.id===A.id).length===0&&w.push(B(A))})}),w.forEach(S=>{E.length!==C.length&&C.filter(D=>D.id===S.id).length===1&&(S.s_y=a.value.s_y),S.s_y+=h,s.value.filter(D=>D.id===S.id)[0].s_y=S.s_y})}}break;case"bottom":const m=T(a.value);m.s_x=n,I(B(s.value.filter(u=>u.move!==!0)),m,!0).length===0&&(a.value.s_x=n);const c=E.filter(u=>x.mobileDragModel?f(r+s.value[_].s_height-u.s_y)>2*q.value:s.value[_].s_height>=u.s_height&&u.s_y+u.s_height-r-s.value[_].s_height<=15||s.value[_].s_height<u.s_height&&u.s_y+u.s_height-r-s.value[_].s_height<=u.s_height/2);if(c.length>0){c.forEach(w=>{const S=P(B(s.value.filter(D=>D.move!==!0&&f(D.s_y+D.s_height)<=f(w.s_y))),w,!0);w.s_y=S.length===0?0:Math.max(...S.map(D=>D.s_y+D.s_height)),s.value.filter(D=>D.id===w.id)[0].s_y=w.s_y});const u=[...I(c,s.value[_],!0),...P(B(s.value.filter(w=>w.move!==!0&&f(w.s_y+w.s_height)<=f(s.value[_].s_y+s.value[_].s_height))),s.value[_],!0)];let h=Math.max(...u.map(w=>w.s_y+w.s_height))-a.value.s_y;if(a.value.s_y=Math.max(...u.map(w=>w.s_y+w.s_height)),a.value.s_x=n,h>0){const w=P(s.value.filter(S=>S.move!==!0&&f(S.s_y)>=f(a.value.s_y)),a.value,!0);B(w).forEach(S=>{P(s.value.filter(A=>A.move!==!0&&f(A.s_y)>=f(S.s_y+S.s_height)),S,!0).forEach(A=>{w.filter(st=>st.id===A.id).length===0&&w.push(B(A))})}),w.forEach(S=>{S.s_y+=h,s.value.filter(D=>D.id===S.id)[0].s_y=S.s_y})}}break;case"left":case"right":const N=E.filter(u=>u.s_x+u.s_width-n>=O.value*3&&n+s.value[_].s_width-u.s_x>=O.value*3).filter(u=>r<u.s_y||r>=u.s_y&&r-u.s_y<=15).sort((u,h)=>{const w=f(u.s_y),S=f(h.s_y);return w-S});if(N.length>0)a.value.s_x=n,a.value.s_y=Math.min(...N.map(u=>u.s_y));else{let u=B(s.value[_]);if(u.s_y=Math.min(...E.map(h=>h.s_y))-u.s_height,a.value.s_y>=Math.min(...E.map(h=>h.s_y+h.s_height))||u.s_y>=0&&I(B(s.value.filter(h=>h.move!==!0)),u,!0).length===0){const h=T(a.value);h.s_x=n,I(B(s.value.filter(w=>w.move!==!0)),h,!0).length===0&&(a.value.s_x=n)}}N.forEach(u=>{const h=a.value.s_y+a.value.s_height-u.s_y>0?a.value.s_y+a.value.s_height-u.s_y:0,w=T([u]);P(s.value.filter(D=>D.move!==!0&&f(D.s_y)>=f(u.s_y+u.s_height)),u,!0).forEach(D=>{w.filter(A=>A.id===D.id).length===0&&w.push(B(D))}),w.forEach(D=>{D.s_y+=h,N.filter(A=>A.id===D.id).length===1&&(N.filter(A=>A.id===D.id)[0].s_y=D.s_y),s.value.filter(A=>A.id===D.id)[0].s_y=D.s_y})});break}s.value.forEach(p=>{fe(p)}),fe(a.value),U(!1),ce(s.value[_]),b("dragIng"),a.value.s_y=s.value[_].syCopy,delete s.value[_].syCopy};if(Y.value){let E=null;E=F(H.value,"i"+s.value[_].id+"d")[0].getBoundingClientRect().top,E-Ge<=ge&&g==="top"&&($.value.scrollTop=$.value.scrollTop-te),Ue-E<=ge&&g==="bottom"&&($.value.scrollTop=$.value.scrollTop+te),M()}else{const E=()=>{const p=$.value.scrollTop;ye==="top"?($.value.scrollTop=$.value.scrollTop-te,p<=te?(De(),r=0):r-=te):($.value.scrollTop=$.value.scrollTop+te,r+=te),s.value[_].s_y=r,M()};ye==="top"&&g==="bottom"&&De(),l.clientY-Ge<=ge&&g==="top"&&!ue&&(M(),ye="top",ue=setInterval(E,100)),ye==="bottom"&&g==="top"&&De(),Ue-l.clientY<=ge&&g==="bottom"&&!ue&&(M(),ye="bottom",ue=setInterval(E,100)),ue||M()}},Ae=()=>{window.removeEventListener("mouseup",Ae),clearTimeout(ee),ee?ee=null:(De(),window.removeEventListener("mousemove",_e),delete s.value[_].move,s.value[_].s_x=a.value.s_x,s.value[_].s_y=a.value.s_y,ce(null),s.value.forEach(l=>{fe(l)}),U(),b("dragEnd",z(s.value[_])),_=null,pe(),qe=setTimeout(()=>{U()},500))},ne=l=>{switch(l){case"top":return 0;case"right":return oe-O.value*2-s.value[_].s_width;case"bottom":return 999999999;case"left":return 0}};let v=null,Q="",Oe=0,Le=0,Pe=0,Ne=0,Re=0,ze=0;const se=(l,o,e)=>{Ve(),a.value=B(o),v=o,b("resizeStart",z(v)),Q=e,Oe=l.clientX,Le=l.clientY,Pe=o.s_width,Ne=o.s_height,Re=o.s_y,ze=o.s_x,v.drag=!0,ce(v),window.addEventListener("mousemove",gt),window.addEventListener("mouseup",Qe),window.addEventListener("keydown",pe)},gt=l=>{const o=Pe+(l.clientX-Oe),e=Ne+(l.clientY-Le),n=Pe-(l.clientX-Oe),r=Ne-(l.clientY-Le),i=Re+(l.clientY-Le),y=ze+(l.clientX-Oe),g=(typeof a.value.itemMinWidth=="number"?a.value.itemMinWidth:x.itemMinWidth)*J.value,M=(typeof a.value.itemMinHeight=="number"?a.value.itemMinHeight:x.itemMinHeight)*X();Q.indexOf("top")!==-1?(a.value.s_height=r<M?M:r>Z("top")?Z("top"):r,a.value.s_y=r<M?Re+Ne-M:r>Z("top")?0:i):Q.indexOf("bottom")!==-1&&(a.value.s_height=e<M?M:e>Z("bottom")?Z("bottom"):e),Q.indexOf("left")!==-1?(a.value.s_width=n<g?g:n>Z("left")?Z("left"):n,a.value.s_x=n<g?ze+Pe-g:n>Z("left")?0:y):Q.indexOf("right")!==-1&&(a.value.s_width=o<g?g:o>Z("right")?Z("right"):o);let E=I(B(s.value.filter(c=>c.drag!==!0)),a.value,!0);if(E.length>0){let c=[];if(Q.indexOf("top")!==-1){const N=P(E,v,!0).filter(h=>f(h.s_y+h.s_height-a.value.s_y)>O.value*2),u=s.value.filter(h=>h.id!==v.id).filter(h=>Math.round(h.s_x)<Math.round(a.value.s_x)&&Math.round(h.s_x+h.s_width)<=Math.round(a.value.s_x)||Math.round(h.s_x)>=Math.round(a.value.s_x+a.value.s_width)).filter(h=>Math.round(h.s_y)===Math.round(a.value.s_y)||Math.round(h.s_y+h.s_height/2)===Math.round(a.value.s_y)||Math.round(h.s_y+h.s_height)===Math.round(a.value.s_y));(u.length>0||N.length>0)&&(v.s_height=a.value.s_height,v.s_y=a.value.s_y,c=[...c,...u.length>0?P(E,v,!0):N])}else if(Q.indexOf("bottom")!==-1){const N=P(E,v,!0).filter(h=>f(a.value.s_y+a.value.s_height-h.s_y)>q.value*2),u=s.value.filter(h=>h.id!==v.id).filter(h=>Math.round(h.s_x)<Math.round(a.value.s_x)&&Math.round(h.s_x+h.s_width)<=Math.round(a.value.s_x)||Math.round(h.s_x)>=Math.round(a.value.s_x+a.value.s_width)).filter(h=>Math.round(h.s_y)===Math.round(a.value.s_y+a.value.s_height)||Math.round(h.s_y+h.s_height/2)===Math.round(a.value.s_y+a.value.s_height)||Math.round(h.s_y+h.s_height)===Math.round(a.value.s_y+a.value.s_height));(u.length>0||N.length>0)&&(v.s_height=a.value.s_height,c=[...c,...u.length>0?P(E,v,!0):N])}if(Q.indexOf("left")!==-1){const N=L(E,v,!0).filter(h=>f(h.s_x+h.s_width-a.value.s_x)>O.value*2),u=s.value.filter(h=>h.id!==v.id).filter(h=>Math.round(h.s_x)===Math.round(a.value.s_x)||Math.round(h.s_x+h.s_width/2)===Math.round(a.value.s_x)||Math.round(h.s_x+h.s_width)===Math.round(a.value.s_x));(u.length>0||N.length>0)&&(v.s_width=a.value.s_width,v.s_x=a.value.s_x,c=[...c,...u.length>0?L(E,v,!0):N])}else if(Q.indexOf("right")!==-1){const N=L(E,v,!0).filter(h=>f(a.value.s_x+a.value.s_width-h.s_x)>O.value*2),u=s.value.filter(h=>h.id!==v.id).filter(h=>Math.round(h.s_x)===Math.round(a.value.s_x+a.value.s_width)||Math.round(h.s_x+h.s_width/2)===Math.round(a.value.s_x+a.value.s_width)||Math.round(h.s_x+h.s_width)===Math.round(a.value.s_x+a.value.s_width));(u.length>0||N.length>0)&&(v.s_width=a.value.s_width,c=[...c,...u.length>0?L(E,v,!0):N])}if(c.length>0){c.sort((N,u)=>{const h=f(N.s_y),w=f(u.s_y);return h-w});for(let N=0;N<c.length;N++)c.filter(u=>u.id===c[N].id).forEach(u=>{u.s_y+=v.s_y+v.s_height-u.s_y,s.value.filter(h=>h.id===u.id)[0].s_y=u.s_y,K([u],(h,w)=>h.filter(S=>S.drag!==!0&&S.id!==w.id),!0)})}}else v.s_x=a.value.s_x,v.s_y=a.value.s_y,v.s_width=a.value.s_width,v.s_height=a.value.s_height;const p=getComputedStyle(H.value),C=parseInt(p.getPropertyValue("--com-item-border-width").trim()),m=parseInt(p.getPropertyValue("--group-tit-height").trim());if(v.isGroup===!0){const c=v.s_width-2*O.value-2*C,N=v.s_height-2*q.value-2*C-(v.groupTit?m:0);v.groupData.forEach(u=>{u.s_width=c*u.groupW,u.s_height=N*u.groupH,u.s_x=c*u.groupX,u.s_y=N*u.groupY})}jt(v),s.value.forEach(c=>{fe(c)}),U(!1),ce(a.value),b("resizeIng")},Qe=l=>{delete v.drag,Q="",ce(null),window.removeEventListener("mousemove",gt),window.removeEventListener("mouseup",Qe),U(),b("resizeEnd",z(v)),v=null,pe()},Z=l=>{switch(l){case"top":return Re+Ne;case"left":return ze+Pe;case"right":return oe-O.value*2-ze;case"bottom":return 999999999}},U=(l=!0)=>{l===!0&&K(s.value,(e,n)=>e.filter(r=>r.id!==n.id)),el(l),s.value.forEach(e=>{(l===!0||e.move!==!0&&e.drag!==!0)&&ht(e)}),l===!0&&tl();const o=s.value.map(e=>{if(e.move===!0){const n=B(e);return n.s_y=a.value.s_y,fe(n),n.y+e.height}else return e.y+e.height});o.length>0?re.value=Math.max(...o):re.value=0},el=(l=!0)=>{const o=B(s.value).sort((e,n)=>{const r=f(e.y),i=f(n.y);return r-i});if(!l){if(v!==null){const e=P(T(o.filter(r=>r.drag!==!0&&f(r.s_y+r.s_height)<f(v.s_y))),v),n=o.filter(r=>r.drag===!0)[0];n&&(e.length>0?(n.height+=n.y-Math.max(...e.map(r=>r.y+r.height)),n.y=Math.max(...e.map(r=>r.y+r.height))):(n.height+=n.y,n.y=0))}else if(_!==null){const e=o.filter(n=>n.move===!0)[0];e&&(e.s_x=a.value.s_x,e.s_y=a.value.s_y,fe(e))}}for(let e=0;e<o.length;e++){const n=P(o,o[e]).filter(r=>f(r.y+r.height)<=f(o[e].y));n.length>0?o[e].y=Math.max(...n.map(r=>r.y+r.height)):o[e].y=0}o.forEach(e=>{l===!0||e.move!==!0&&e.drag!==!0?s.value.filter(n=>n.id===e.id)[0].y=e.y:e.move===!0&&(s.value.filter(n=>n.id===e.id)[0].syCopy=e.y*X())})},tl=()=>{const l=s.value.filter(o=>o.isGroup===!0);if(l.length>0){const o=getComputedStyle(H.value),e=parseInt(o.getPropertyValue("--setting-icon-group-width").trim()),n=parseInt(o.getPropertyValue("--setting-icon-group-height").trim());l.forEach(r=>{O.value+r.s_x+r.s_width+e>oe?O.value+r.s_x-e<0?x.groupBtnPosMore?q.value+r.s_y-n<0?r.btnPosition="bottom":r.btnPosition="top":r.btnPosition="center":r.btnPosition="left":r.btnPosition="right"})}},yt=new ResizeObserver(l=>{nl(oe===l[0].borderBoxSize[0].inlineSize?null:l[0].borderBoxSize[0].inlineSize,dt===l[0].borderBoxSize[0].blockSize?null:l[0].borderBoxSize[0].blockSize)});t.onMounted(()=>{yt.observe(H.value)});const Ie=t.ref("");let Ze=0,je=0,et=null,tt=!1;const ll=(l=[],o=null)=>{clearInterval(et),Ie.value=new Date().getTime()+"",Ze=0,je=0,l.forEach(e=>{Ze+=1,e.isGroup===!0&&(je+=e.groupData.length)}),vt(),b("domStart"),s.value=T(l),s.value.filter(e=>e.isGroup===!0).forEach(e=>{if(e.groupData.length<2)Te(e.id);else{const n=Ye(e.groupData,e);He(n)}}),tt=!0,t.nextTick(()=>{const e=H.value.getBoundingClientRect();o!=null&&s.value.length>0?(ke(o),de(e.width/o)):(ke(s.value.length>0?e.width:null),de(1)),s.value.forEach(n=>{ae(n)}),U(),et=setInterval(()=>{F(H.value,Ie.value+"p").length===Ze&&F(H.value,Ie.value+"c").length===je&&(clearInterval(et),b("domReady"))},10),setTimeout(()=>{tt=!1},500)})},ol=l=>{l.showSet=!0},lt=l=>{const o=s.value.filter(e=>e.id===l);if(o.length===1)delete o[0].showSet;else try{}catch{}},_t=(l,o,e)=>{const n=it(l),r=it(o),i=Et(r,n,e);if(i)l.x=i.x,l.y=i.y;else{l.x=0;const y=r.map(g=>g.y+g.height);if(y.length>0)l.y=Math.max(...y);else try{}catch{}}},xe=(l,o=null,e=!1)=>{const n=T(l),r=s.value.filter(i=>i.id===o);if(n.id||(n.id=new Date().getTime()+""),o&&r.length!==1)try{}catch{}finally{return}if(e!==!0&&(delete n.x,delete n.y,o?(r[0].groupData.forEach(i=>{ie(i,r[0])}),_t(n,r[0].groupData,r[0].width)):_t(n,s.value,(j||oe)-O.value*2)),o){r[0].groupData.push(n);const i=Ye(r[0].groupData,r[0]);He(i),K([i],(y,g)=>y.filter(M=>M.id!==g.id))}else n.x!==void 0&&n.y!==void 0&&(s.value.length===0&&ke(oe),ae(n),s.value.push(n));U()},ot=(l,o=null,e=null)=>{let n=null;const r=s.value.filter(i=>i.id===o);if(o?r.length===1&&(n=T(r[0].groupData.filter(i=>i.id===l)[0])):n=T(s.value.filter(i=>i.id===l)[0]),n)return n.id=e||new Date().getTime()+"",o?(ie(n,r[0]),xe(n,o)):xe(n),z(o?s.value.filter(i=>i.id===o)[0].groupData.filter(i=>i.id===n.id)[0]:s.value.filter(i=>i.id===n.id)[0]);try{}catch{}finally{return null}},we=(l,o=null,e=!0)=>{let n=-1;const r=s.value.filter(i=>i.id===o);if(o?r.length===1&&(n=r[0].groupData.findIndex(i=>i.id===l)):n=s.value.findIndex(i=>i.id===l),n!==-1){if(o)if(r[0].groupData.splice(n,1),r[0].groupData.length===1)Te(o);else{r[0].groupData.forEach(y=>{ie(y,r[0])});const i=Ye(r[0].groupData,r[0]);He(i)}else s.value.splice(n,1),s.value.length===0&&e&&(ke(null),de(1));e&&U()}else try{}catch{}},rl=l=>{He(l,!1)},He=(l,o=!0)=>{if(l.id){const e=T(l);let n=-1;const r=s.value.filter(i=>i.id===e.inGroupId);if(e.inGroupId?r.length===1&&(n=r[0].groupData.findIndex(i=>i.id===e.id)):n=s.value.findIndex(i=>i.id===e.id),n!==-1){if(o&&(delete e.showPop,delete e.showSet,delete e.btnPosition,e.groupData&&e.groupData.forEach(i=>{delete i.showPop,delete i.showSet})),e.inGroupId){if(o)r[0].groupData[n]=e;else try{delete r[0].showPop,delete r[0].showSet,delete r[0].btnPosition,r[0].groupData&&r[0].groupData.forEach(i=>{delete i.showPop,delete i.showSet});for(let i in e){const y=i.split(".");let g=r[0].groupData[n];for(let M=0;M<y.length;M++)if(M===y.length-1)g[y[M]]=e[i];else if(g=g[y[M]],!g)throw new Error(i)}}catch{try{}catch{}}ae(r[0])}else{if(o)s.value[n]=e;else try{delete s.value[n].showPop,delete s.value[n].showSet,delete s.value[n].btnPosition,s.value[n].groupData&&s.value[n].groupData.forEach(i=>{delete i.showPop,delete i.showSet});for(let i in e){const y=i.split(".");let g=s.value[n];for(let M=0;M<y.length;M++)if(M===y.length-1)g[y[M]]=e[i];else if(g=g[y[M]],!g)throw new Error(i)}}catch{try{}catch{}}ae(s.value[n])}U()}else try{}catch{}}else try{}catch{}},rt=(l,o=!1)=>{let e=null;if(e=s.value.filter(n=>n.id===l)[0],e)return typeof o=="boolean"?e.static=o:o&&typeof o=="object"&&(typeof o.static=="boolean"&&(e.static=o.static),typeof o.dragable=="boolean"&&(e.dragable=o.dragable),typeof o.resizable=="boolean"&&(e.resizable=o.resizable)),z(s.value.filter(n=>n.id===e.id)[0]);try{}catch{}finally{return null}},nl=(l,o)=>{l!==null&&(oe=l,tt||(de(j&&oe?l/j:1),s.value.forEach(e=>{ae(e)}),U())),o!==null&&(dt=o)},xt=l=>{l.showPop||(s.value.forEach(o=>{delete o.showPop,o.groupData&&o.groupData.forEach(e=>{delete e.showPop})}),b("openSetMenu",z(l)),l.showPop=!0,window.addEventListener("click",Ve))},Ve=()=>{s.value.forEach(l=>{delete l.showPop,l.groupData&&l.groupData.forEach(o=>{delete o.showPop})}),window.removeEventListener("click",Ve)},W=t.ref(!1),wt=l=>{const o=s.value.findIndex(e=>e.id===l);if(o!==-1)s.value[o].checked=!0,s.value[o].checkDis=!0,W.value=!0,b("showGroup",W.value);else try{}catch{}},nt=()=>{W.value=!1,s.value.forEach(l=>{delete l.checked,delete l.checkDis,l.groupData&&l.groupData.forEach(o=>{delete o.checked,delete o.checkDis})}),b("showGroup",W.value)},sl=l=>{l.checked=!l.checked,b("updateChecked",s.value.filter(o=>o.checked).length)},Ye=(l,o)=>{const e=T(l),n=T(o);e.sort((p,C)=>{const m=f(p.x),c=f(C.x);return m-c});for(let p=0;p<e.length-1;p++){if(p===0&&e[p].x>0){const C=e[p].x;for(let m=p;m<e.length;m++)e[m].x-=C}if(e[p+1].x>e[p].x+e[p].width){const C=B(e.slice(0,p+1));if(e[p+1].x>Math.max(...C.map(m=>m.x+m.width))){const m=e[p+1].x-Math.max(...C.map(c=>c.x+c.width));for(let c=p+1;c<e.length;c++)e[c].x-=m}}}e.sort((p,C)=>{const m=f(p.y),c=f(C.y);return m-c});for(let p=0;p<e.length-1;p++){if(p===0&&e[p].y>0){const C=e[p].y;for(let m=p;m<e.length;m++)e[m].y-=C}if(e[p+1].y>e[p].y+e[p].height){const C=B(e.slice(0,p+1));if(e[p+1].y>Math.max(...C.map(m=>m.y+m.height))){const m=e[p+1].y-Math.max(...C.map(c=>c.y+c.height));for(let c=p+1;c<e.length;c++)e[c].y-=m}}}const r=e.map(p=>p.x+p.width),i=Math.max(...r),y=e.map(p=>p.y+p.height),g=Math.max(...y);e.forEach(p=>{p.inGroupId||(p.inGroupId=n.id),p.groupW=p.width/i,p.groupH=p.height/g,p.groupX=p.x/i,p.groupY=p.y/g,p.isObstacle=p.x+p.width===i&&p.y===0,delete p.width,delete p.height});const M=getComputedStyle(H.value),E=parseInt(M.getPropertyValue("--group-tit-height").trim());return n.width=i,n.height=g+(n.groupTit?E:0),n.groupData=[...e],n},ie=(l,o)=>{const e=getComputedStyle(H.value),n=parseInt(e.getPropertyValue("--group-tit-height").trim());l.width=o.width*l.groupW,l.height=(o.height-(o.groupTit?n:0))*l.groupH},il=()=>{t.nextTick(()=>{ct()})},al=()=>{let l=s.value.filter(o=>o.checked);if(l.length>1)if(l=x.beforeAddGroup(T(l)),typeof l=="object"&&l instanceof Array&&l.length>0&&l.filter(o=>o.id).length===l.length){const o={id:new Date().getTime()+"G",isGroup:!0,groupTit:""},e=Ye(l,o);return e.groupData.forEach(n=>{we(n.id,null,!1)}),xe(e),nt(),z(s.value.filter(n=>n.id===e.id)[0])}else try{}catch{}finally{return null}else return nt(),null},kt=(l,o)=>{const e=s.value.filter(n=>n.id===o)[0];if(e){let n=e.groupData.filter(r=>r.id===l)[0];if(n){if(e.groupData.length===2)return Te(o);if(n=x.beforeRemoveGroup(T([n])),typeof n=="object"&&n instanceof Array&&n.length===1&&n.filter(r=>r.id).length===1)return n=n[0],ie(n,e),delete n.inGroupId,delete n.groupW,delete n.groupH,delete n.groupX,delete n.groupY,delete n.isObstacle,we(n.id,e.id),xe(n),[z(s.value.filter(r=>r.id===l)[0])];try{}catch{}finally{return[]}}else try{}catch{}finally{return[]}}else try{}catch{}finally{return[]}},Te=l=>{const o=s.value.filter(e=>e.id===l)[0];if(o){let e=[],n=!0;try{o.groupData.forEach(r=>{if(r=x.beforeRemoveGroup(T([o])),typeof r=="object"&&r instanceof Array&&r.length===1&&r.filter(i=>i.id).length===1)r=r[0];else throw n=!1,new Error})}catch{}if(n){we(o.id,null,!1),o.groupData.forEach(i=>{ie(i,o),i.x+=o.x,i.y+=o.y,delete i.inGroupId,delete i.groupW,delete i.groupH,delete i.groupX,delete i.groupY,delete i.isObstacle,e.push(i.id),xe(i,null,!0)});let r=[];return e.forEach(i=>{r.push(z(s.value.filter(y=>y.id===i)[0]))}),r}else return[]}else try{}catch{}finally{return[]}},cl=(l="",o)=>{const e=s.value.filter(n=>n.id===o)[0];if(e){if(!e.groupTit||!l){const n=getComputedStyle(H.value),r=parseInt(n.getPropertyValue("--group-tit-height").trim());e.groupTit&&!l&&(e.height-=r,e.s_height-=r*X()),!e.groupTit&&l&&(e.height+=r,e.s_height+=r*X())}e.groupTit=l,K([e],(n,r)=>n.filter(i=>i.id!==r.id)),U()}else try{}catch{}},vt=()=>{s.value=[],ke(null),de(1),re.value=0},ul=(l=null)=>new Promise((o,e)=>{s.value.forEach(r=>{delete r.showPop,delete r.showSet,r.groupData&&r.groupData.forEach(i=>{delete i.showPop,delete i.showSet})});const n=T(s.value);n.forEach(r=>{r.isGroup===!0&&r.groupData.forEach(i=>{ie(i,r),delete i.s_width,delete i.s_height,delete i.s_x,delete i.s_y}),delete r.btnPosition,delete r.s_width,delete r.s_height,delete r.s_x,delete r.s_y}),l&&j&&n.forEach(r=>{ae(r,l/j),ht(r,l/j)}),o({data:n,width:l||j})});return t.onBeforeUnmount(()=>{yt.unobserve(H.value),window.removeEventListener("click",Ve),window.removeEventListener("click",Ce),window.removeEventListener("keydown",We),window.removeEventListener("keydown",pe)}),k({init:ll,addItem:xe,copyItem:ot,deleteItem:we,updateItem:rl,toggleLockItem:rt,hideGroupSet:lt,openGroup:wt,closeGroup:nt,changeGroupBorder:il,addGroup:al,removeGroupItem:kt,removeGroup:Te,changeGroupTit:cl,openTrimModel:$e,closeTrimModel:Ce,resetData:vt,getData:ul}),(l,o)=>(t.openBlock(),t.createElementBlock("div",{class:"vue-drag-component-plus",style:t.normalizeStyle({"--item-scale":t.unref(J),"--css-scale":d.seeModel?t.unref(ve):1,"--com-x-space":t.unref(O)+"px","--com-y-space":t.unref(q)+"px"}),ref_key:"pageRef",ref:H},[t.createElementVNode("div",{class:"content-box",ref_key:"contentBoxRef",ref:$},[(t.openBlock(!0),t.createElementBlock(t.Fragment,null,t.renderList(t.unref(s),(e,n)=>(t.openBlock(),t.createElementBlock("div",{class:t.normalizeClass(["com-item",t.unref(_)!==null?"":"not-move-animate",e.move?"is-move":"",e.drag?"is-drag":"",e.showPop||e.isGroup&&e.groupData.filter(r=>r.showPop).length>0?"on-top":"",t.unref(Ie)+"p","i"+e.id+"d"]),style:t.normalizeStyle({width:e.s_width+"px",height:e.s_height+"px",top:e.s_y+"px",left:e.s_x+"px"}),key:n},[t.createElementVNode("div",{class:t.normalizeClass(["com-item-inner",d.seeModel||t.unref(Y)||t.unref(W)||e.static===!0||e.dragable===!1?"":"can-drag",e.move||e.drag?"always-hover":"",d.seeModel?"no-hover":""]),onMousedown:t.withModifiers(r=>d.seeModel||t.unref(Y)||t.unref(W)||e.static===!0||e.dragable===!1?null:pt(r,n),["prevent"]),onMouseenter:r=>d.seeModel||t.unref(Y)||t.unref(W)||t.unref(_)!==null||t.unref(v)||!e.isGroup?null:ol(e),onMouseleave:r=>d.seeModel||t.unref(Y)||t.unref(W)||t.unref(_)!==null||t.unref(v)||!e.isGroup?null:lt(e.id)},[t.createElementVNode("div",St,[e.isGroup?(t.openBlock(),t.createElementBlock(t.Fragment,{key:0},[e.groupTit?(t.openBlock(),t.createElementBlock("div",{key:0,class:"group-item-tit",title:e.groupTit},t.toDisplayString(e.groupTit),9,Bt)):t.createCommentVNode("",!0),t.createElementVNode("div",{class:t.normalizeClass(["group-item-content",e.groupTit?"":"full"])},[(t.openBlock(!0),t.createElementBlock(t.Fragment,null,t.renderList(e.groupData,(r,i)=>(t.openBlock(),t.createElementBlock("div",{class:t.normalizeClass(["com-item-box-child",r.isObstacle?"is-obstacle":"",t.unref(Ie)+"c"]),style:t.normalizeStyle({width:r.s_width+"px",height:r.s_height+"px",top:r.s_y+"px",left:r.s_x+"px"}),key:i},[t.createElementVNode("div",Ct,[t.renderSlot(l.$slots,"item",{data:r},()=>[t.createElementVNode("p",null,t.toDisplayString(Math.round(r.s_width*100)/100)+","+t.toDisplayString(Math.round(r.s_height*100)/100),1),t.createElementVNode("p",null,t.toDisplayString(Math.round(r.s_x*100)/100)+","+t.toDisplayString(Math.round(r.s_y*100)/100),1)])]),!d.seeModel&&!t.unref(Y)&&!t.unref(W)&&t.unref(_)===null&&t.unref(v)===null?(t.openBlock(),t.createElementBlock("div",{key:0,class:"setting-box",style:t.normalizeStyle({display:r.showPop?"flex":"none"}),onMousedown:t.withModifiers(y=>null,["prevent","stop"])},[t.createVNode(he,{iconObj:d.settingIcon,onClick:t.withModifiers(y=>xt(r),["prevent","stop"])},null,8,["iconObj","onClick"])],36)):t.createCommentVNode("",!0),r.showPop?(t.openBlock(),t.createElementBlock("div",{key:1,class:"setting-box-pop",onMousedown:t.withModifiers(y=>null,["prevent","stop"])},[t.renderSlot(l.$slots,"setPopNormal",{data:z(r)},()=>[t.createElementVNode("div",{class:"setting-box-pop-item",onClick:y=>kt(r.id,r.inGroupId)},"移出组合",8,Dt),t.createElementVNode("div",{class:"setting-box-pop-item",onClick:y=>ot(r.id,r.inGroupId)},"复制",8,Pt),t.createElementVNode("div",{class:"setting-box-pop-item",onClick:y=>we(r.id,r.inGroupId)},"删除",8,Nt)])],32)):t.createCommentVNode("",!0)],6))),128))],2)],64)):(t.openBlock(),t.createElementBlock("div",zt,[t.renderSlot(l.$slots,"item",{data:e},()=>[t.createElementVNode("p",null,t.toDisplayString(Math.round(e.s_width*100)/100)+","+t.toDisplayString(Math.round(e.s_height*100)/100),1),t.createElementVNode("p",null,t.toDisplayString(Math.round(e.s_x*100)/100)+","+t.toDisplayString(Math.round(e.s_y*100)/100),1)])])),!e.isGroup&&e.notGroup!==!0&&t.unref(W)?(t.openBlock(),t.createElementBlock("div",{key:2,class:t.normalizeClass(["group-checkbox",e.checked?"is-checked":"",e.checkDis?"disabled":""]),onClick:r=>e.checkDis?null:sl(e)},null,10,It)):t.createCommentVNode("",!0),!d.seeModel&&!t.unref(Y)&&!t.unref(W)&&t.unref(_)===null&&t.unref(v)===null?(t.openBlock(),t.createElementBlock("div",{key:3,class:t.normalizeClass(["setting-box",e.isGroup===!0?e.btnPosition==="right"?"only-g":e.btnPosition==="left"?"only-g l":e.btnPosition==="top"?"only-g t":e.btnPosition==="bottom"?"only-g b":e.btnPosition==="center"?"only-g c":"":""]),style:t.normalizeStyle({display:e.showPop||e.showSet?"flex":"none"}),onMousedown:t.withModifiers(r=>null,["prevent","stop"])},[t.createVNode(he,{iconObj:d.settingIcon,onClick:t.withModifiers(r=>xt(e),["prevent","stop"])},null,8,["iconObj","onClick"])],38)):t.createCommentVNode("",!0),e.showPop?(t.openBlock(),t.createElementBlock("div",{key:4,class:t.normalizeClass(["setting-box-pop",e.isGroup===!0?e.btnPosition==="right"?"special":e.btnPosition==="left"?"special l":e.btnPosition==="top"?"special t":e.btnPosition==="bottom"?"special b":e.btnPosition==="center"?"special c":"":""]),onMousedown:t.withModifiers(r=>null,["prevent","stop"])},[e.isGroup===!0?t.renderSlot(l.$slots,"setPopSpecial",{key:0,data:z(e)},()=>[t.createElementVNode("div",{class:"setting-box-pop-item",onClick:r=>rt(e.id,e.static!==!0)},t.toDisplayString(e.static===!0?"解除":"")+"锁定 ",9,Vt),e.static!==!0?(t.openBlock(),t.createElementBlock("div",{key:0,class:"setting-box-pop-item",onClick:r=>$e(e.id)}," 微调 ",8,Tt)):t.createCommentVNode("",!0),d.hideTit?t.createCommentVNode("",!0):(t.openBlock(),t.createElementBlock("div",{key:1,class:"setting-box-pop-item",onClick:r=>{lt(e.id),b("showTitPop",e.groupTit,e.id)}}," 设置组合标题 ",8,Gt)),t.createElementVNode("div",{class:"setting-box-pop-item",onClick:r=>Te(e.id)},"解除组合",8,At)]):t.renderSlot(l.$slots,"setPopNormal",{key:1,data:z(e)},()=>[e.notGroup!==!0?(t.openBlock(),t.createElementBlock("div",{key:0,class:"setting-box-pop-item",onClick:r=>wt(e.id)},"组合",8,Ot)):t.createCommentVNode("",!0),t.createElementVNode("div",{class:"setting-box-pop-item",onClick:r=>rt(e.id,e.static!==!0)},t.toDisplayString(e.static===!0?"解除":"")+"锁定 ",9,Lt),e.static!==!0?(t.openBlock(),t.createElementBlock("div",{key:1,class:"setting-box-pop-item",onClick:r=>$e(e.id)}," 微调 ",8,Rt)):t.createCommentVNode("",!0),t.createElementVNode("div",{class:"setting-box-pop-item",onClick:r=>ot(e.id)},"复制",8,Ht),t.createElementVNode("div",{class:"setting-box-pop-item",onClick:r=>we(e.id)},"删除",8,Yt)])],34)):t.createCommentVNode("",!0)]),!d.seeModel&&!t.unref(Y)&&!t.unref(W)&&!e.showPop&&!(e.isGroup&&e.groupData.filter(r=>r.showPop).length>0)&&!e.move&&e.static!==!0&&e.resizable!==!1?(t.openBlock(),t.createElementBlock(t.Fragment,{key:0},[t.unref(R).indexOf("topLeft")!==-1?(t.openBlock(),t.createElementBlock("div",{key:0,class:"resize-line top-left",onMousedown:t.withModifiers(r=>se(r,e,"top-left"),["prevent","stop"])},null,40,Xt)):t.createCommentVNode("",!0),t.unref(R).indexOf("top")!==-1?(t.openBlock(),t.createElementBlock("div",{key:1,class:"resize-line top",onMousedown:t.withModifiers(r=>se(r,e,"top"),["prevent","stop"])},null,40,$t)):t.createCommentVNode("",!0),t.unref(R).indexOf("topRight")!==-1?(t.openBlock(),t.createElementBlock("div",{key:2,class:"resize-line top-right",onMousedown:t.withModifiers(r=>se(r,e,"top-right"),["prevent","stop"])},null,40,Wt)):t.createCommentVNode("",!0),t.unref(R).indexOf("left")!==-1?(t.openBlock(),t.createElementBlock("div",{key:3,class:"resize-line left",onMousedown:t.withModifiers(r=>se(r,e,"left"),["prevent","stop"])},null,40,Ft)):t.createCommentVNode("",!0),t.unref(R).indexOf("right")!==-1?(t.openBlock(),t.createElementBlock("div",{key:4,class:"resize-line right",onMousedown:t.withModifiers(r=>se(r,e,"right"),["prevent","stop"])},null,40,Kt)):t.createCommentVNode("",!0),t.unref(R).indexOf("bottomLeft")!==-1?(t.openBlock(),t.createElementBlock("div",{key:5,class:"resize-line bottom-left",onMousedown:t.withModifiers(r=>se(r,e,"bottom-left"),["prevent","stop"])},null,40,qt)):t.createCommentVNode("",!0),t.unref(R).indexOf("bottom")!==-1?(t.openBlock(),t.createElementBlock("div",{key:6,class:"resize-line bottom",onMousedown:t.withModifiers(r=>se(r,e,"bottom"),["prevent","stop"])},null,40,Ut)):t.createCommentVNode("",!0),t.unref(R).indexOf("bottomRight")!==-1?(t.openBlock(),t.createElementBlock("div",{key:7,class:"resize-line bottom-right",onMousedown:t.withModifiers(r=>se(r,e,"bottom-right"),["prevent","stop"])},null,40,Jt)):t.createCommentVNode("",!0)],64)):t.createCommentVNode("",!0)],42,mt)],6))),128)),(t.openBlock(!0),t.createElementBlock(t.Fragment,null,t.renderList(t.unref(s),(e,n)=>(t.openBlock(),t.createElementBlock("div",{class:t.normalizeClass(["shadow-bg",t.unref(_)!==null?"":"not-move-animate",e.move?"is-move":"",e.drag?"is-drag":""]),style:t.normalizeStyle({width:e.s_width-t.unref(O)*2+"px",height:e.s_height-t.unref(q)*2+"px",top:e.s_y+t.unref(q)+"px",left:e.s_x+t.unref(O)+"px"}),key:n},null,6))),128)),t.unref(_)!==null||t.unref(v)?(t.openBlock(),t.createElementBlock("div",{key:0,class:"drag-bg",style:t.normalizeStyle({width:t.unref(a).s_width+"px",height:t.unref(a).s_height+"px",top:t.unref(a).s_y+"px",left:t.unref(a).s_x+"px"})},null,4)):t.createCommentVNode("",!0),t.createElementVNode("div",{class:"height-bg",style:t.normalizeStyle({height:(t.unref(re)>0?t.unref(re)*X()+(d.seeModel?d.seeModelMinBg:220):0)+"px"})},null,4),d.showAuxiliary?(t.openBlock(),t.createElementBlock(t.Fragment,{key:1},[t.unref(Me)!==null?(t.openBlock(),t.createElementBlock("div",{key:0,class:"auxiliary-line hor",style:t.normalizeStyle({top:t.unref(Me)+"px",left:"0px"})},null,4)):t.createCommentVNode("",!0),t.unref(be)!==null?(t.openBlock(),t.createElementBlock("div",{key:1,class:"auxiliary-line hor",style:t.normalizeStyle({top:t.unref(be)+"px",left:"0px"})},null,4)):t.createCommentVNode("",!0),t.unref(Ee)!==null?(t.openBlock(),t.createElementBlock("div",{key:2,class:"auxiliary-line hor",style:t.normalizeStyle({top:t.unref(Ee)+"px",left:"0px"})},null,4)):t.createCommentVNode("",!0),t.unref(me)!==null?(t.openBlock(),t.createElementBlock("div",{key:3,class:"auxiliary-line",style:t.normalizeStyle({top:"0px",left:t.unref(me)+"px",height:t.unref(re)*X()+220+"px"})},null,4)):t.createCommentVNode("",!0),t.unref(Se)!==null?(t.openBlock(),t.createElementBlock("div",{key:4,class:"auxiliary-line",style:t.normalizeStyle({top:"0px",left:t.unref(Se)+"px",height:t.unref(re)*X()+220+"px"})},null,4)):t.createCommentVNode("",!0),t.unref(Be)!==null?(t.openBlock(),t.createElementBlock("div",{key:5,class:"auxiliary-line",style:t.normalizeStyle({top:"0px",left:t.unref(Be)+"px",height:t.unref(re)*X()+220+"px"})},null,4)):t.createCommentVNode("",!0)],64)):t.createCommentVNode("",!0),t.unref(s).length===0?(t.openBlock(),t.createElementBlock("div",Qt,[t.renderSlot(l.$slots,"empty",{},()=>[o[0]||(o[0]=t.createTextVNode(" 暂无数据 "))])])):t.createCommentVNode("",!0)],512)],4))}}],at={install(d){Zt.forEach(k=>{d.component("vueDragComponentPlus",k)})}};return typeof window<"u"&&window.Vue&&window.Vue.use(at),at});
