(function(t,ce){typeof exports=="object"&&typeof module<"u"?module.exports=ce(require("vue")):typeof define=="function"&&define.amd?define(["vue"],ce):(t=typeof globalThis<"u"?globalThis:t||self,t.vueDragComponentPlus=ce(t.Vue))})(this,function(t){"use strict";const ce={__name:"icon",props:{iconObj:{type:Object,requured:!0}},setup(c){return(w,V)=>{const m=t.resolveComponent("el-icon");return c.iconObj.type==="custom"?(t.openBlock(),t.createBlock(t.resolveDynamicComponent(c.iconObj.icon),t.normalizeProps(t.mergeProps({key:0},c.iconObj.attrs)),null,16)):c.iconObj.type==="el"?(t.openBlock(),t.createBlock(m,t.normalizeProps(t.mergeProps({key:1},c.iconObj.attrs)),{default:t.withCtx(()=>[(t.openBlock(),t.createBlock(t.resolveDynamicComponent(c.iconObj.icon)))]),_:1},16)):c.iconObj.type==="iconfont"?(t.openBlock(),t.createElementBlock("i",t.mergeProps({key:2,class:["icon iconfont","icon-"+c.iconObj.icon]},c.iconObj.attrs),null,16)):(t.openBlock(),t.createElementBlock("i",t.mergeProps({key:3,class:c.iconObj.type},c.iconObj.attrs),t.toDisplayString(c.iconObj.icon),17))}}},lt=(c,w={x:"x",y:"y",width:"width",height:"height"})=>{let V=null;return c instanceof Array?(V=[],c.forEach(m=>{typeof m[w.x]=="number"&&typeof m[w.y]=="number"&&typeof m[w.width]=="number"&&typeof m[w.height]=="number"&&V.push({x:m[w.x],y:m[w.y],width:m[w.width],height:m[w.height]})})):typeof c[w.width]=="number"&&typeof c[w.height]=="number"&&(V={width:c[w.width],height:c[w.height]}),V},wt=c=>{const w=new Map;return c.forEach(V=>{w.has(V.x)||w.set(V.x,[]),w.get(V.x).push(V)}),w},kt=(c,w)=>c.filter(V=>V.x<=w.x&&V.x+V.width>w.x||V.x>w.x&&V.x<w.x+w.width),vt=(c,w,V,m=!1)=>{if(w.width>V)return null;let _=[];if(c.length===0){const T={x:0,y:0};return m?[T]:T}const I=Math.max(...c.map(T=>T.y+T.height)),S=new Set([0]);c.forEach(T=>{S.add(T.y),S.add(T.y+T.height)});const Le=Array.from(S).sort((T,u)=>T-u);for(const T of Le){const u=T+w.height;if(u>I)continue;const W=c.filter(s=>s.y<u&&s.y+s.height>T);if(W.length===0){const s={x:0,y:T};if(!m)return s;_.push(s);continue}const z=W.map(s=>[s.x,s.x+s.width]);z.sort((s,ee)=>s[0]-ee[0]);const P=[];let[Y,F]=z[0];for(let s=1;s<z.length;s++){const[ee,L]=z[s];ee<=F?F=Math.max(F,L):(P.push([Y,F]),[Y,F]=[ee,L])}if(P.push([Y,F]),P[0][0]>=w.width){const s={x:0,y:T};if(!m)return s;_.push(s)}let N=P[0][1];for(let s=1;s<P.length;s++){if(P[s][0]-N>=w.width){const L={x:N,y:T};if(!m)return L;_.push(L)}N=Math.max(N,P[s][1])}if(V-N>=w.width){const s={x:N,y:T};if(!m)return s;_.push(s)}}return m?(wt(_).forEach((u,W)=>{if(u.length>1)for(let z=0;z<u.length-1;z++){let P={...w,...u[z]};kt(c.filter(Y=>Y.y>=P.y+P.height&&Y.y<=u[z+1].y),P).length===0&&(_=_.filter(Y=>!(Y.x===u[z+1].x&&Y.y===u[z+1].y)),u.splice(z,1),z--)}}),_.sort((u,W)=>u.y!==W.y?u.y-W.y:u.x-W.x),_.length===0?null:_):null},ao="",mt=["onMousedown","onMouseenter","onMouseleave"],bt={class:"com-item-box"},Et=["title"],Mt={class:"com-item-box-content"},St=["onClick"],Bt=["onClick"],Ct=["onClick"],Dt={key:1,class:"com-item-box-content"},Pt=["onClick"],Nt=["onClick"],zt=["onClick"],Vt=["onClick"],It=["onClick"],Tt=["onClick"],Gt=["onClick"],Ot=["onClick"],At=["onClick"],Lt=["onClick"],Rt=["onMousedown"],Ht=["onMousedown"],Yt=["onMousedown"],Xt=["onMousedown"],$t=["onMousedown"],Wt=["onMousedown"],Ft=["onMousedown"],Kt=["onMousedown"],qt={key:2,class:"com-empty"},Ut=[{__name:"index",props:{insertResizeKeys:{type:Array,default:()=>["topLeft","top","topRight","left","right","bottomLeft","bottom","bottomRight"]},excludeResizeKeys:{type:Array,default:()=>[]},mobileDragModel:{type:Boolean,default:!1},seeModel:{type:Boolean,default:!1},seeModelMinBg:{type:Number,default:50,validator(c,w){return c>=0}},itemMinWidth:{type:Number,default:50,validator(c,w){return c>=20}},itemMinHeight:{type:Number,default:50,validator(c,w){return c>=20}},xSpace:{type:Number,default:10,validator(c,w){return c>=0}},ySpace:{type:Number,default:null,validator(c,w){return c>=0}},hScaleDiscount:{type:Number,default:.2,validator(c,w){return c>0}},cssScaleMin:{type:Number,default:.75,validator(c,w){return c>0}},cssScaleMax:{type:Number,default:1.2,validator(c,w){return c>0&&c>=(w?w.cssScaleMin:.1)}},settingIcon:{type:Object,default:()=>({icon:"设置"})},hideTit:{type:Boolean,default:!1},showAuxiliary:{type:Boolean,default:!1},groupBtnPosMore:{type:Boolean,default:!1},beforeAddGroup:{type:Function,default:c=>c},beforeRemoveGroup:{type:Function,default:c=>c},dragDelayTime:{type:Number,default:200,validator(c,w){return c>=0&&c<1e3}},moveDistance:{type:[Number,String],default:"50px"},scrollDistance:{type:[Number,String],default:"20px"}},emits:["baseWidthInit","changeScale","changeCssScale","changeTrimModel","dragStart","dragIng","dragEnd","resizeStart","resizeIng","resizeEnd","showGroup","openSetMenu","updateChecked","showTitPop","domStart","domReady"],setup(c,{expose:w,emit:V}){const m=V,_=c,I=o=>{if(typeof o=="object"&&!t.isVNode(o)&&o!==null&&!(o instanceof Date)){let l=o instanceof Array?[]:{};for(let e in o)l[e]=typeof o[e]=="object"&&!t.isVNode(o[e])&&o[e]!==null&&!(o[e]instanceof Date)?I(o[e]):o[e];return l}else return o},S=o=>{let l={};if(o instanceof Array)l=[],o.forEach(e=>{l.push(S(e))});else for(let e in o)["id","move","drag","itemMinWidth","width","s_width","itemMinHeight","height","s_height","x","s_x","y","s_y","isGroup","groupTit","groupData","inGroupId","groupW","groupH","groupX","groupY"].indexOf(e)!==-1&&(e==="groupData"?l[e]=S(o[e]):l[e]=o[e]);return l},Le=(o,l)=>{let e=o.matches||o.webkitMatchesSelector||o.mozMatchesSelector||o.msMatchesSelector;for(;o&&!e.call(o,l);)o=o.parentElement;return o},T=(o,l)=>o.classList?o.classList.contains(l):new RegExp("\\s"+l+"\\s").test(" "+o.className+" "),u=o=>parseFloat(o.toFixed(7)),W=(o,l)=>{let e=[],n=r=>{r.forEach(i=>{T(i,l)&&e.push(i),i.childNodes&&i.childNodes.length>0&&n(i.childNodes)})};return n(o.childNodes),e},z=(o,l,e=!1)=>Y(P(o,l,e),l,e),P=(o,l,e=!1)=>o.filter(n=>u(n[e?"s_x":"x"])<=u(l[e?"s_x":"x"])&&u(n[e?"s_x":"x"]+n[e?"s_width":"width"])>u(l[e?"s_x":"x"])||u(n[e?"s_x":"x"])>u(l[e?"s_x":"x"])&&u(n[e?"s_x":"x"])<u(l[e?"s_x":"x"]+l[e?"s_width":"width"])),Y=(o,l,e=!1)=>o.filter(n=>u(n[e?"s_y":"y"])<=u(l[e?"s_y":"y"])&&u(n[e?"s_y":"y"]+n[e?"s_height":"height"])>u(l[e?"s_y":"y"])||u(n[e?"s_y":"y"])>u(l[e?"s_y":"y"])&&u(n[e?"s_y":"y"])<u(l[e?"s_y":"y"]+l[e?"s_height":"height"])),F=(o,l=n=>n,e=!1)=>{const n=S(s.value),r=S(o);r.sort((g,p)=>{const b=u(g[e?"s_y":"y"]),G=u(p[e?"s_y":"y"]);if(b!==G)return b-G;{const h=u(g[e?"s_x":"x"]),E=u(p[e?"s_x":"x"]);return h-E}});const i=g=>{z(l(n,g),g,e).forEach(b=>{b[e?"s_y":"y"]=g[e?"s_y":"y"]+g[e?"s_height":"height"],i(b)})};r.forEach(g=>i(n.filter(p=>p.id===g.id)[0])),n.forEach(g=>{s.value.filter(p=>p.id===g.id)[0][e?"s_y":"y"]=g[e?"s_y":"y"]})},N=o=>{const l=I(o);return delete l.showPop,delete l.showSet,l.groupData?l.groupData.forEach(e=>{delete e.showPop,delete e.showSet,ne(e,l),delete e.s_width,delete e.s_height,delete e.s_x,delete e.s_y}):l.inGroupId&&(delete l.showPop,delete l.showSet,ne(l,s.value.filter(e=>e.id===l.inGroupId)[0])),delete l.btnPosition,delete l.s_width,delete l.s_height,delete l.s_x,delete l.s_y,delete l.syCopy,l},s=t.ref([]),ee=()=>{_.insertResizeKeys.forEach(o=>{_.excludeResizeKeys.indexOf(o)===-1&&L.value.push(o)})};t.watch(()=>[_.insertResizeKeys,_.excludeResizeKeys],()=>{ee()});const L=t.ref([]);ee();const nt=()=>{s.value.length>0&&s.value.filter(o=>o.isGroup===!0).forEach(o=>{se(o)})},st=()=>{_.xSpace!==null&&_.xSpace!==void 0?A.value=_.xSpace/2:A.value=10/2,_.ySpace!==null&&_.ySpace!==void 0&&_.ySpace>=0?K.value=_.ySpace/2:K.value=A.value,nt()};t.watch(()=>[_.xSpace,_.ySpace],()=>{st()});const A=t.ref(0),K=t.ref(0);st();const R=t.ref(null);let Z=null;const ge=o=>{Z=o,m("baseWidthInit",Z)},U=t.ref(1),ye=t.ref(1),ue=o=>{U.value=o,o<_.cssScaleMin?ye.value=_.cssScaleMin:o>_.cssScaleMax?ye.value=_.cssScaleMax:ye.value=o,m("changeScale",U.value),m("changeCssScale",_.seeModel?ye.value:1)},X=()=>1+(U.value-1)*_.hScaleDiscount;t.watch(()=>_.seeModel,()=>{ue(U.value)});const se=(o,l=null)=>{l?(o.width=o.width*l,o.height=o.height*l):(o.s_width=o.width*U.value,o.s_height=o.height*X());const e=getComputedStyle(R.value),n=parseInt(e.getPropertyValue("--com-item-border-width").trim()),r=parseInt(e.getPropertyValue("--group-tit-height").trim());if(o.isGroup===!0)if(l){const i=o.width,g=o.height-(o.groupTit?r:0);o.groupData.forEach(p=>{p.width=i*p.groupW,p.height=g*p.groupH,p.x=i*p.groupX,p.y=g*p.groupY})}else{const i=o.s_width-2*A.value-2*n,g=o.s_height-2*K.value-2*n-(o.groupTit?r:0);o.groupData.forEach(p=>{p.s_width=i*p.groupW,p.s_height=g*p.groupH,p.s_x=i*p.groupX,p.s_y=g*p.groupY})}},it=(o,l=null)=>{l?(o.s_x=o.x*l,o.s_y=o.y*l):(o.s_x=o.x*U.value,o.s_y=o.y*X())},Jt=o=>{o.width=o.s_width/U.value,o.height=o.s_height/X();const l=getComputedStyle(R.value),e=parseInt(l.getPropertyValue("--group-tit-height").trim());if(o.isGroup===!0){const n=o.width,r=o.height-(o.groupTit?e:0);o.groupData.forEach(i=>{i.x=n*i.groupX,i.y=r*i.groupY})}},_e=o=>{o.x=o.s_x/U.value,o.y=o.s_y/X()};let te=null,at=null;const oe=t.ref(0),xe=t.ref(null),we=t.ref(null),ke=t.ref(null),ve=t.ref(null),me=t.ref(null),be=t.ref(null),ie=o=>{const l=S(o);if(!_.showAuxiliary||o===null)xe.value=null,we.value=null,ke.value=null,ve.value=null,me.value=null,be.value=null;else{const e=getComputedStyle(R.value),n=parseInt(e.getPropertyValue("--auxiliary-width").trim()),r=s.value.filter(f=>f.id!==l.id).map(f=>Math.round(f.s_y)),i=s.value.filter(f=>f.id!==l.id).map(f=>Math.round(f.s_y+f.s_height/2)),g=s.value.filter(f=>f.id!==l.id).map(f=>Math.round(f.s_y+f.s_height)),p=[...r,...i,...g];p.sort(),p.filter(f=>f===Math.round(l.s_y)).length>0?xe.value=l.s_y:xe.value=null,p.filter(f=>f===Math.round(l.s_y+l.s_height/2)).length>0?we.value=l.s_y+l.s_height/2:we.value=null,p.filter(f=>f===Math.round(l.s_y+l.s_height)).length>0?ke.value=l.s_y+l.s_height-n:ke.value=null;const b=s.value.filter(f=>f.id!==l.id).map(f=>Math.round(f.s_x)),G=s.value.filter(f=>f.id!==l.id).map(f=>Math.round(f.s_x+f.s_width/2)),h=s.value.filter(f=>f.id!==l.id).map(f=>Math.round(f.s_x+f.s_width)),E=[...b,...G,...h];E.sort(),E.filter(f=>f===Math.round(l.s_x)).length>0?ve.value=l.s_x:ve.value=null,E.filter(f=>f===Math.round(l.s_x+l.s_width/2)).length>0?me.value=l.s_x+l.s_width/2:me.value=null,E.filter(f=>f===Math.round(l.s_x+l.s_width)).length>0?be.value=l.s_x+l.s_width-n:be.value=null}},he=()=>{window.removeEventListener("keydown",he),y!==null?Ve():v!==null&&Ke()},H=t.ref(!1),Re=o=>{let l=null;if(l=s.value.filter(e=>e.id===o)[0],l&&l.static!==!0&&l.dragable!==!1)H.value=!0,ht(s.value.findIndex(e=>e.id===o)),setTimeout(()=>{window.addEventListener("click",Ee),window.addEventListener("keydown",He)},50),m("changeTrimModel",H.value,N(s.value.filter(e=>e.id===l.id)[0]));else try{}catch{}},He=o=>{switch(o.keyCode){case 13:case 27:case 32:o.preventDefault(),Ee();break;case 37:o.preventDefault(),de("left");break;case 38:o.preventDefault(),de("top");break;case 39:o.preventDefault(),de("right");break;case 40:o.preventDefault(),de("bottom");break}},Ee=()=>{window.removeEventListener("click",Ee),window.removeEventListener("keydown",He),Ve(),H.value=!1,m("changeTrimModel",H.value)},d=t.ref({});let y=null,Ye=null,Xe=null,$e=null,j=null;const ae=t.ref(null);let ct=null,We=null,ut=null,Fe=null,Ne=null,ze=null;const ht=(o,l)=>{clearTimeout($e),clearTimeout(j),De();const e=ae.value.getBoundingClientRect();if(ct=e.left,We=e.top,ut=e.bottom,Fe=e.height,typeof _.moveDistance=="string"?Ne=_.moveDistance.indexOf("px")!==-1?parseFloat(_.moveDistance):50:Ne=_.moveDistance*Fe,typeof _.scrollDistance=="string"?ze=_.scrollDistance.indexOf("px")!==-1?parseFloat(_.scrollDistance):20:ze=_.scrollDistance*Fe,H.value)j=null,y=o,d.value=S(s.value[y]),m("dragStart",N(s.value[y])),s.value[y].move=!0,ie(s.value[y]),Ye=0,Xe=0;else{const n=Le(o.target,".com-item");n&&(j=setTimeout(()=>{j=null,y=l,d.value=S(s.value[y]),m("dragStart",N(s.value[y])),s.value[y].move=!0,ie(s.value[y]);const r=n.getBoundingClientRect();Ye=o.clientX-r.left,Xe=o.clientY-r.top,window.addEventListener("mousemove",de),window.addEventListener("keydown",he)},_.dragDelayTime),window.addEventListener("mouseup",Ve))}},de=o=>{clearTimeout($e),clearTimeout(j),j=null;let l=null,e=null;if(H.value)switch(l=s.value[y].s_x,e=s.value[y].s_y,o){case"top":e-=1;break;case"bottom":e+=1;break;case"left":l-=1;break;case"right":l+=1;break}else l=o.clientX-ct-Ye,e=o.clientY-We+ae.value.scrollTop-Xe;const n=l<=le("left")?le("left"):l>=le("right")?le("right"):l,r=e<=le("top")?le("top"):e>=le("bottom")?le("bottom"):e,i=n-s.value[y].s_x,g=r-s.value[y].s_y;let p="";i>0?p="right":i<0?p="left":g>0?p="bottom":g<0&&(p="top"),s.value[y].s_x=n,s.value[y].s_y=r;let b=null;H.value&&(b=W(R.value,"i"+s.value[y].id+"d")[0].getBoundingClientRect().top),(b||o.clientY)-We<=Ne&&p==="top"&&(ae.value.scrollTop=ae.value.scrollTop-ze),ut-(b||o.clientY)<=Ne&&p==="bottom"&&(ae.value.scrollTop=ae.value.scrollTop+ze);let G=z(S(s.value.filter(h=>h.move!==!0)),s.value[y],!0);if(G.length===0)d.value.s_x=n,d.value.s_y=r;else switch(p){case"top":const h=I(d.value);h.s_x=n,z(S(s.value.filter(a=>a.move!==!0)),h,!0).length===0&&(d.value.s_x=n);const E=G.filter(a=>_.mobileDragModel?u(a.s_height+a.s_y-r)>2*K.value:s.value[y].s_height>=a.s_height&&r-a.s_y<=15||s.value[y].s_height<a.s_height&&r-a.s_y<=s.value[y].s_height/2);if(E.length>0){const a=P(S(s.value.filter(x=>x.move!==!0&&u(x.s_y+x.s_height)<=u(d.value.s_y)&&E.filter(M=>M.id===x.id).length===0)),d.value,!0);let D=s.value[y].s_height;if(a.length===0&&(D-=Math.min(...E.map(x=>x.s_y))),G.length===E.length?d.value.s_y=a.length===0?0:Math.max(...a.map(x=>x.s_y+x.s_height)):d.value.s_y=Math.max(...a.map(x=>x.s_y+x.s_height)),d.value.s_x=n,D>0){const x=I(E);E.forEach(M=>{P(s.value.filter(O=>O.move!==!0&&u(O.s_y)>=u(M.s_y+M.s_height)),M,!0).forEach(O=>{x.filter(ot=>ot.id===O.id).length===0&&x.push(S(O))})}),x.forEach(M=>{G.length!==E.length&&E.filter(B=>B.id===M.id).length===1&&(M.s_y=d.value.s_y),M.s_y+=D,s.value.filter(B=>B.id===M.id)[0].s_y=M.s_y})}}break;case"bottom":const f=I(d.value);f.s_x=n,z(S(s.value.filter(a=>a.move!==!0)),f,!0).length===0&&(d.value.s_x=n);const k=G.filter(a=>_.mobileDragModel?u(r+s.value[y].s_height-a.s_y)>2*K.value:s.value[y].s_height>=a.s_height&&a.s_y+a.s_height-r-s.value[y].s_height<=15||s.value[y].s_height<a.s_height&&a.s_y+a.s_height-r-s.value[y].s_height<=a.s_height/2);if(k.length>0){k.forEach(x=>{const M=P(S(s.value.filter(B=>B.move!==!0&&u(B.s_y+B.s_height)<=u(x.s_y))),x,!0);x.s_y=M.length===0?0:Math.max(...M.map(B=>B.s_y+B.s_height)),s.value.filter(B=>B.id===x.id)[0].s_y=x.s_y});const a=[...z(k,s.value[y],!0),...P(S(s.value.filter(x=>x.move!==!0&&u(x.s_y+x.s_height)<=u(s.value[y].s_y+s.value[y].s_height))),s.value[y],!0)];let D=Math.max(...a.map(x=>x.s_y+x.s_height))-d.value.s_y;if(d.value.s_y=Math.max(...a.map(x=>x.s_y+x.s_height)),d.value.s_x=n,D>0){const x=P(s.value.filter(M=>M.move!==!0&&u(M.s_y)>=u(d.value.s_y)),d.value,!0);S(x).forEach(M=>{P(s.value.filter(O=>O.move!==!0&&u(O.s_y)>=u(M.s_y+M.s_height)),M,!0).forEach(O=>{x.filter(ot=>ot.id===O.id).length===0&&x.push(S(O))})}),x.forEach(M=>{M.s_y+=D,s.value.filter(B=>B.id===M.id)[0].s_y=M.s_y})}}break;case"left":case"right":const C=G.filter(a=>a.s_x+a.s_width-n>=A.value*2&&n+s.value[y].s_width-a.s_x>=A.value*2).filter(a=>r<a.s_y||r>=a.s_y&&r-a.s_y<=15).sort((a,D)=>{const x=u(a.s_y),M=u(D.s_y);return x-M});if(C.length>0)d.value.s_x=n,d.value.s_y=Math.min(...C.map(a=>a.s_y));else{let a=S(s.value[y]);if(a.s_y=Math.min(...G.map(D=>D.s_y))-a.s_height,d.value.s_y>=Math.min(...G.map(D=>D.s_y+D.s_height))||a.s_y>=0&&z(S(s.value.filter(D=>D.move!==!0)),a,!0).length===0){const D=I(d.value);D.s_x=n,z(S(s.value.filter(x=>x.move!==!0)),D,!0).length===0&&(d.value.s_x=n)}}C.forEach(a=>{const D=d.value.s_y+d.value.s_height-a.s_y>0?d.value.s_y+d.value.s_height-a.s_y:0,x=I([a]);P(s.value.filter(B=>B.move!==!0&&u(B.s_y)>=u(a.s_y+a.s_height)),a,!0).forEach(B=>{x.filter(O=>O.id===B.id).length===0&&x.push(S(B))}),x.forEach(B=>{B.s_y+=D,C.filter(O=>O.id===B.id).length===1&&(C.filter(O=>O.id===B.id)[0].s_y=B.s_y),s.value.filter(O=>O.id===B.id)[0].s_y=B.s_y})});break}s.value.forEach(h=>{_e(h)}),_e(d.value),q(!1),ie(s.value[y]),m("dragIng"),d.value.s_y=s.value[y].syCopy,delete s.value[y].syCopy},Ve=()=>{window.removeEventListener("mouseup",Ve),clearTimeout(j),j?j=null:(window.removeEventListener("mousemove",de),delete s.value[y].move,s.value[y].s_x=d.value.s_x,s.value[y].s_y=d.value.s_y,ie(null),s.value.forEach(o=>{_e(o)}),q(),m("dragEnd",N(s.value[y])),y=null,he(),$e=setTimeout(()=>{q()},500))},le=o=>{switch(o){case"top":return 0;case"right":return te-A.value*2-s.value[y].s_width;case"bottom":return 999999999;case"left":return 0}};let v=null,J="",Ie=0,Te=0,Me=0,Se=0,Ge=0,Be=0;const re=(o,l,e)=>{De(),d.value=S(l),v=l,m("resizeStart",N(v)),J=e,Ie=o.clientX,Te=o.clientY,Me=l.s_width,Se=l.s_height,Ge=l.s_y,Be=l.s_x,v.drag=!0,ie(v),window.addEventListener("mousemove",dt),window.addEventListener("mouseup",Ke),window.addEventListener("keydown",he)},dt=o=>{const l=Me+(o.clientX-Ie),e=Se+(o.clientY-Te),n=Me-(o.clientX-Ie),r=Se-(o.clientY-Te),i=Ge+(o.clientY-Te),g=Be+(o.clientX-Ie),p=(typeof d.value.itemMinWidth=="number"?d.value.itemMinWidth:_.itemMinWidth)*U.value,b=(typeof d.value.itemMinHeight=="number"?d.value.itemMinHeight:_.itemMinHeight)*X();J.indexOf("top")!==-1?(d.value.s_height=r<b?b:r>Q("top")?Q("top"):r,d.value.s_y=r<b?Ge+Se-b:r>Q("top")?0:i):J.indexOf("bottom")!==-1&&(d.value.s_height=e<b?b:e>Q("bottom")?Q("bottom"):e),J.indexOf("left")!==-1?(d.value.s_width=n<p?p:n>Q("left")?Q("left"):n,d.value.s_x=n<p?Be+Me-p:n>Q("left")?0:g):J.indexOf("right")!==-1&&(d.value.s_width=l<p?p:l>Q("right")?Q("right"):l);let G=z(S(s.value.filter(k=>k.drag!==!0)),d.value,!0);if(G.length>0){let k=[];if(J.indexOf("top")!==-1){const C=P(G,v,!0).filter(a=>u(a.s_y+a.s_height-d.value.s_y)>A.value*2);C.length>0&&(v.s_height=d.value.s_height,v.s_y=d.value.s_y,k=[...k,...C])}else if(J.indexOf("bottom")!==-1){const C=P(G,v,!0).filter(a=>u(d.value.s_y+d.value.s_height-a.s_y)>K.value*2);C.length>0&&(v.s_height=d.value.s_height,k=[...k,...C])}if(J.indexOf("left")!==-1){const C=Y(G,v,!0).filter(a=>u(a.s_x+a.s_width-d.value.s_x)>A.value*2);C.length>0&&(v.s_width=d.value.s_width,v.s_x=d.value.s_x,k=[...k,...C])}else if(J.indexOf("right")!==-1){const C=Y(G,v,!0).filter(a=>u(d.value.s_x+d.value.s_width-a.s_x)>A.value*2);C.length>0&&(v.s_width=d.value.s_width,k=[...k,...C])}if(k.length>0){k.sort((C,a)=>{const D=u(C.s_y),x=u(a.s_y);return D-x});for(let C=0;C<k.length;C++)k.filter(a=>a.id===k[C].id).forEach(a=>{a.s_y+=v.s_y+v.s_height-a.s_y,s.value.filter(D=>D.id===a.id)[0].s_y=a.s_y,F([a],(D,x)=>D.filter(M=>M.drag!==!0&&M.id!==x.id),!0)})}}else v.s_x=d.value.s_x,v.s_y=d.value.s_y,v.s_width=d.value.s_width,v.s_height=d.value.s_height;const h=getComputedStyle(R.value),E=parseInt(h.getPropertyValue("--com-item-border-width").trim()),f=parseInt(h.getPropertyValue("--group-tit-height").trim());if(v.isGroup===!0){const k=v.s_width-2*A.value-2*E,C=v.s_height-2*K.value-2*E-(v.groupTit?f:0);v.groupData.forEach(a=>{a.s_width=k*a.groupW,a.s_height=C*a.groupH,a.s_x=k*a.groupX,a.s_y=C*a.groupY})}Jt(v),s.value.forEach(k=>{_e(k)}),q(!1),ie(v),m("resizeIng")},Ke=o=>{delete v.drag,J="",ie(null),window.removeEventListener("mousemove",dt),window.removeEventListener("mouseup",Ke),q(),m("resizeEnd",N(v)),v=null,he()},Q=o=>{switch(o){case"top":return Ge+Se;case"left":return Be+Me;case"right":return te-A.value*2-Be;case"bottom":return 999999999}},q=(o=!0)=>{o===!0&&F(s.value,(e,n)=>e.filter(r=>r.id!==n.id)),Qt(o),s.value.forEach(e=>{(o===!0||e.move!==!0&&e.drag!==!0)&&it(e)}),o===!0&&Zt();const l=s.value.map(e=>e.y+e.height);l.length>0?oe.value=Math.max(...l):oe.value=0},Qt=(o=!0)=>{const l=S(s.value).sort((e,n)=>{const r=u(e.y),i=u(n.y);return r-i});if(!o){if(v!==null){const e=P(I(l.filter(r=>r.drag!==!0&&u(r.s_y+r.s_height)<u(v.s_y))),v),n=l.filter(r=>r.drag===!0)[0];n&&(e.length>0?(n.height+=n.y-Math.max(...e.map(r=>r.y+r.height)),n.y=Math.max(...e.map(r=>r.y+r.height))):(n.height+=n.y,n.y=0))}else if(y!==null){const e=l.filter(n=>n.move===!0)[0];e&&(e.s_x=d.value.s_x,e.s_y=d.value.s_y,_e(e))}}for(let e=0;e<l.length;e++){const n=P(l,l[e]).filter(r=>u(r.y+r.height)<=u(l[e].y));n.length>0?l[e].y=Math.max(...n.map(r=>r.y+r.height)):l[e].y=0}l.forEach(e=>{o===!0||e.move!==!0&&e.drag!==!0?s.value.filter(n=>n.id===e.id)[0].y=e.y:e.move===!0&&(s.value.filter(n=>n.id===e.id)[0].syCopy=e.y*X())})},Zt=()=>{const o=s.value.filter(l=>l.isGroup===!0);if(o.length>0){const l=getComputedStyle(R.value),e=parseInt(l.getPropertyValue("--setting-icon-group-width").trim()),n=parseInt(l.getPropertyValue("--setting-icon-group-height").trim());o.forEach(r=>{A.value+r.s_x+r.s_width+e>te?A.value+r.s_x-e<0?_.groupBtnPosMore?K.value+r.s_y-n<0?r.btnPosition="bottom":r.btnPosition="top":r.btnPosition="center":r.btnPosition="left":r.btnPosition="right"})}},ft=new ResizeObserver(o=>{oo(te===o[0].borderBoxSize[0].inlineSize?null:o[0].borderBoxSize[0].inlineSize,at===o[0].borderBoxSize[0].blockSize?null:o[0].borderBoxSize[0].blockSize)});t.onMounted(()=>{ft.observe(R.value)});const Ce=t.ref("");let qe=0,Ue=0,Je=null,Qe=!1;const jt=(o=[],l=null)=>{clearInterval(Je),Ce.value=new Date().getTime()+"",qe=0,Ue=0,o.forEach(e=>{qe+=1,e.isGroup===!0&&(Ue+=e.groupData.length)}),xt(),m("domStart"),s.value=I(o),s.value.filter(e=>e.isGroup===!0).forEach(e=>{if(e.groupData.length<2)Pe(e.id);else{const n=Ae(e.groupData,e);Oe(n)}}),Qe=!0,t.nextTick(()=>{const e=R.value.getBoundingClientRect();l!=null&&s.value.length>0?(ge(l),ue(e.width/l)):(ge(s.value.length>0?e.width:null),ue(1)),s.value.forEach(n=>{se(n)}),q(),Je=setInterval(()=>{W(R.value,Ce.value+"p").length===qe&&W(R.value,Ce.value+"c").length===Ue&&(clearInterval(Je),m("domReady"))},10),setTimeout(()=>{Qe=!1},500)})},eo=o=>{o.showSet=!0},Ze=o=>{const l=s.value.filter(e=>e.id===o);if(l.length===1)delete l[0].showSet;else try{}catch{}},pt=(o,l,e)=>{const n=lt(o),r=lt(l),i=vt(r,n,e);if(i)o.x=i.x,o.y=i.y;else{o.x=0;const g=r.map(p=>p.y+p.height);if(g.length>0)o.y=Math.max(...g);else try{}catch{}}},fe=(o,l=null,e=!1)=>{const n=I(o),r=s.value.filter(i=>i.id===l);if(n.id||(n.id=new Date().getTime()+""),l&&r.length!==1)try{}catch{}finally{return}if(e!==!0&&(delete n.x,delete n.y,l?(r[0].groupData.forEach(i=>{ne(i,r[0])}),pt(n,r[0].groupData,r[0].width)):pt(n,s.value,(Z||te)-A.value*2)),l){r[0].groupData.push(n);const i=Ae(r[0].groupData,r[0]);Oe(i),F([i],(g,p)=>g.filter(b=>b.id!==p.id))}else n.x!==void 0&&n.y!==void 0&&(s.value.length===0&&ge(te),se(n),s.value.push(n));q()},je=(o,l=null,e=null)=>{let n=null;const r=s.value.filter(i=>i.id===l);if(l?r.length===1&&(n=I(r[0].groupData.filter(i=>i.id===o)[0])):n=I(s.value.filter(i=>i.id===o)[0]),n)return n.id=e||new Date().getTime()+"",l?(ne(n,r[0]),fe(n,l)):fe(n),N(l?s.value.filter(i=>i.id===l)[0].groupData.filter(i=>i.id===n.id)[0]:s.value.filter(i=>i.id===n.id)[0]);try{}catch{}finally{return null}},pe=(o,l=null,e=!0)=>{let n=-1;const r=s.value.filter(i=>i.id===l);if(l?r.length===1&&(n=r[0].groupData.findIndex(i=>i.id===o)):n=s.value.findIndex(i=>i.id===o),n!==-1){if(l)if(r[0].groupData.splice(n,1),r[0].groupData.length===1)Pe(l);else{r[0].groupData.forEach(g=>{ne(g,r[0])});const i=Ae(r[0].groupData,r[0]);Oe(i)}else s.value.splice(n,1),s.value.length===0&&e&&(ge(null),ue(1));e&&q()}else try{}catch{}},to=o=>{Oe(o,!1)},Oe=(o,l=!0)=>{if(o.id){const e=I(o);let n=-1;const r=s.value.filter(i=>i.id===e.inGroupId);if(e.inGroupId?r.length===1&&(n=r[0].groupData.findIndex(i=>i.id===e.id)):n=s.value.findIndex(i=>i.id===e.id),n!==-1){if(l&&(delete e.showPop,delete e.showSet,delete e.btnPosition,e.groupData&&e.groupData.forEach(i=>{delete i.showPop,delete i.showSet})),e.inGroupId){if(l)r[0].groupData[n]=e;else try{delete r[0].showPop,delete r[0].showSet,delete r[0].btnPosition,r[0].groupData&&r[0].groupData.forEach(i=>{delete i.showPop,delete i.showSet});for(let i in e){const g=i.split(".");let p=r[0].groupData[n];for(let b=0;b<g.length;b++)if(b===g.length-1)p[g[b]]=e[i];else if(p=p[g[b]],!p)throw new Error(i)}}catch{try{}catch{}}se(r[0])}else{if(l)s.value[n]=e;else try{delete s.value[n].showPop,delete s.value[n].showSet,delete s.value[n].btnPosition,s.value[n].groupData&&s.value[n].groupData.forEach(i=>{delete i.showPop,delete i.showSet});for(let i in e){const g=i.split(".");let p=s.value[n];for(let b=0;b<g.length;b++)if(b===g.length-1)p[g[b]]=e[i];else if(p=p[g[b]],!p)throw new Error(i)}}catch{try{}catch{}}se(s.value[n])}q()}else try{}catch{}}else try{}catch{}},et=(o,l=!1)=>{let e=null;if(e=s.value.filter(n=>n.id===o)[0],e)return typeof l=="boolean"?e.static=l:l&&typeof l=="object"&&(typeof l.static=="boolean"&&(e.static=l.static),typeof l.dragable=="boolean"&&(e.dragable=l.dragable),typeof l.resizable=="boolean"&&(e.resizable=l.resizable)),N(s.value.filter(n=>n.id===e.id)[0]);try{}catch{}finally{return null}},oo=(o,l)=>{o!==null&&(te=o,Qe||(ue(Z&&te?o/Z:1),s.value.forEach(e=>{se(e)}),q())),l!==null&&(at=l)},gt=o=>{o.showPop||(s.value.forEach(l=>{delete l.showPop,l.groupData&&l.groupData.forEach(e=>{delete e.showPop})}),m("openSetMenu",N(o)),o.showPop=!0,window.addEventListener("click",De))},De=()=>{s.value.forEach(o=>{delete o.showPop,o.groupData&&o.groupData.forEach(l=>{delete l.showPop})}),window.removeEventListener("click",De)},$=t.ref(!1),yt=o=>{const l=s.value.findIndex(e=>e.id===o);if(l!==-1)s.value[l].checked=!0,s.value[l].checkDis=!0,$.value=!0,m("showGroup",$.value);else try{}catch{}},tt=()=>{$.value=!1,s.value.forEach(o=>{delete o.checked,delete o.checkDis,o.groupData&&o.groupData.forEach(l=>{delete l.checked,delete l.checkDis})}),m("showGroup",$.value)},lo=o=>{o.checked=!o.checked,m("updateChecked",s.value.filter(l=>l.checked).length)},Ae=(o,l)=>{const e=I(o),n=I(l);e.sort((h,E)=>{const f=u(h.x),k=u(E.x);return f-k});for(let h=0;h<e.length-1;h++){if(h===0&&e[h].x>0){const E=e[h].x;for(let f=h;f<e.length;f++)e[f].x-=E}if(e[h+1].x>e[h].x+e[h].width){const E=S(e.slice(0,h+1));if(e[h+1].x>Math.max(...E.map(f=>f.x+f.width))){const f=e[h+1].x-Math.max(...E.map(k=>k.x+k.width));for(let k=h+1;k<e.length;k++)e[k].x-=f}}}e.sort((h,E)=>{const f=u(h.y),k=u(E.y);return f-k});for(let h=0;h<e.length-1;h++){if(h===0&&e[h].y>0){const E=e[h].y;for(let f=h;f<e.length;f++)e[f].y-=E}if(e[h+1].y>e[h].y+e[h].height){const E=S(e.slice(0,h+1));if(e[h+1].y>Math.max(...E.map(f=>f.y+f.height))){const f=e[h+1].y-Math.max(...E.map(k=>k.y+k.height));for(let k=h+1;k<e.length;k++)e[k].y-=f}}}const r=e.map(h=>h.x+h.width),i=Math.max(...r),g=e.map(h=>h.y+h.height),p=Math.max(...g);e.forEach(h=>{h.inGroupId||(h.inGroupId=n.id),h.groupW=h.width/i,h.groupH=h.height/p,h.groupX=h.x/i,h.groupY=h.y/p,h.isObstacle=h.x+h.width===i&&h.y===0,delete h.width,delete h.height});const b=getComputedStyle(R.value),G=parseInt(b.getPropertyValue("--group-tit-height").trim());return n.width=i,n.height=p+(n.groupTit?G:0),n.groupData=[...e],n},ne=(o,l)=>{const e=getComputedStyle(R.value),n=parseInt(e.getPropertyValue("--group-tit-height").trim());o.width=l.width*o.groupW,o.height=(l.height-(l.groupTit?n:0))*o.groupH},ro=()=>{t.nextTick(()=>{nt()})},no=()=>{let o=s.value.filter(l=>l.checked);if(o.length>1)if(o=_.beforeAddGroup(I(o)),typeof o=="object"&&o instanceof Array&&o.length>0&&o.filter(l=>l.id).length===o.length){const l={id:new Date().getTime()+"G",isGroup:!0,groupTit:""},e=Ae(o,l);return e.groupData.forEach(n=>{pe(n.id,null,!1)}),fe(e),tt(),N(s.value.filter(n=>n.id===e.id)[0])}else try{}catch{}finally{return null}else return tt(),null},_t=(o,l)=>{const e=s.value.filter(n=>n.id===l)[0];if(e){let n=e.groupData.filter(r=>r.id===o)[0];if(n){if(e.groupData.length===2)return Pe(l);if(n=_.beforeRemoveGroup(I([n])),typeof n=="object"&&n instanceof Array&&n.length===1&&n.filter(r=>r.id).length===1)return n=n[0],ne(n,e),delete n.inGroupId,delete n.groupW,delete n.groupH,delete n.groupX,delete n.groupY,delete n.isObstacle,pe(n.id,e.id),fe(n),[N(s.value.filter(r=>r.id===o)[0])];try{}catch{}finally{return[]}}else try{}catch{}finally{return[]}}else try{}catch{}finally{return[]}},Pe=o=>{const l=s.value.filter(e=>e.id===o)[0];if(l){let e=[],n=!0;try{l.groupData.forEach(r=>{if(r=_.beforeRemoveGroup(I([l])),typeof r=="object"&&r instanceof Array&&r.length===1&&r.filter(i=>i.id).length===1)r=r[0];else throw n=!1,new Error})}catch{}if(n){pe(l.id,null,!1),l.groupData.forEach(i=>{ne(i,l),i.x+=l.x,i.y+=l.y,delete i.inGroupId,delete i.groupW,delete i.groupH,delete i.groupX,delete i.groupY,delete i.isObstacle,e.push(i.id),fe(i,null,!0)});let r=[];return e.forEach(i=>{r.push(N(s.value.filter(g=>g.id===i)[0]))}),r}else return[]}else try{}catch{}finally{return[]}},so=(o="",l)=>{const e=s.value.filter(n=>n.id===l)[0];if(e){if(!e.groupTit||!o){const n=getComputedStyle(R.value),r=parseInt(n.getPropertyValue("--group-tit-height").trim());e.groupTit&&!o&&(e.height-=r,e.s_height-=r*X()),!e.groupTit&&o&&(e.height+=r,e.s_height+=r*X())}e.groupTit=o,F([e],(n,r)=>n.filter(i=>i.id!==r.id)),q()}else try{}catch{}},xt=()=>{s.value=[],ge(null),ue(1),oe.value=0},io=(o=null)=>new Promise((l,e)=>{s.value.forEach(r=>{delete r.showPop,delete r.showSet,r.groupData&&r.groupData.forEach(i=>{delete i.showPop,delete i.showSet})});const n=I(s.value);n.forEach(r=>{r.isGroup===!0&&r.groupData.forEach(i=>{ne(i,r),delete i.s_width,delete i.s_height,delete i.s_x,delete i.s_y}),delete r.btnPosition,delete r.s_width,delete r.s_height,delete r.s_x,delete r.s_y}),o&&Z&&n.forEach(r=>{se(r,o/Z),it(r,o/Z)}),l({data:n,width:o||Z})});return t.onBeforeUnmount(()=>{ft.unobserve(R.value),window.removeEventListener("click",De),window.removeEventListener("click",Ee),window.removeEventListener("keydown",He),window.removeEventListener("keydown",he)}),w({init:jt,addItem:fe,copyItem:je,deleteItem:pe,updateItem:to,toggleLockItem:et,hideGroupSet:Ze,openGroup:yt,closeGroup:tt,changeGroupBorder:ro,addGroup:no,removeGroupItem:_t,removeGroup:Pe,changeGroupTit:so,openTrimModel:Re,closeTrimModel:Ee,resetData:xt,getData:io}),(o,l)=>(t.openBlock(),t.createElementBlock("div",{class:"vue-drag-component-plus",style:t.normalizeStyle({"--item-scale":t.unref(U),"--css-scale":c.seeModel?t.unref(ye):1,"--com-x-space":t.unref(A)+"px","--com-y-space":t.unref(K)+"px"}),ref_key:"pageRef",ref:R},[t.createElementVNode("div",{class:"content-box",ref_key:"contentBoxRef",ref:ae},[(t.openBlock(!0),t.createElementBlock(t.Fragment,null,t.renderList(t.unref(s),(e,n)=>(t.openBlock(),t.createElementBlock("div",{class:t.normalizeClass(["com-item",t.unref(y)!==null?"":"not-move-animate",e.move?"is-move":"",e.drag?"is-drag":"",e.showPop||e.isGroup&&e.groupData.filter(r=>r.showPop).length>0?"on-top":"",t.unref(Ce)+"p","i"+e.id+"d"]),style:t.normalizeStyle({width:e.s_width+"px",height:e.s_height+"px",top:e.s_y+"px",left:e.s_x+"px"}),key:n},[t.createElementVNode("div",{class:t.normalizeClass(["com-item-inner",c.seeModel||t.unref(H)||t.unref($)||e.static===!0||e.dragable===!1?"":"can-drag",e.move||e.drag?"always-hover":"",c.seeModel?"no-hover":""]),onMousedown:t.withModifiers(r=>c.seeModel||t.unref(H)||t.unref($)||e.static===!0||e.dragable===!1?null:ht(r,n),["prevent"]),onMouseenter:r=>c.seeModel||t.unref(H)||t.unref($)||t.unref(y)!==null||t.unref(v)||!e.isGroup?null:eo(e),onMouseleave:r=>c.seeModel||t.unref(H)||t.unref($)||t.unref(y)!==null||t.unref(v)||!e.isGroup?null:Ze(e.id)},[t.createElementVNode("div",bt,[e.isGroup?(t.openBlock(),t.createElementBlock(t.Fragment,{key:0},[e.groupTit?(t.openBlock(),t.createElementBlock("div",{key:0,class:"group-item-tit",title:e.groupTit},t.toDisplayString(e.groupTit),9,Et)):t.createCommentVNode("",!0),t.createElementVNode("div",{class:t.normalizeClass(["group-item-content",e.groupTit?"":"full"])},[(t.openBlock(!0),t.createElementBlock(t.Fragment,null,t.renderList(e.groupData,(r,i)=>(t.openBlock(),t.createElementBlock("div",{class:t.normalizeClass(["com-item-box-child",r.isObstacle?"is-obstacle":"",t.unref(Ce)+"c"]),style:t.normalizeStyle({width:r.s_width+"px",height:r.s_height+"px",top:r.s_y+"px",left:r.s_x+"px"}),key:i},[t.createElementVNode("div",Mt,[t.renderSlot(o.$slots,"item",{data:r},()=>[t.createElementVNode("p",null,t.toDisplayString(Math.round(r.s_width*100)/100)+","+t.toDisplayString(Math.round(r.s_height*100)/100),1),t.createElementVNode("p",null,t.toDisplayString(Math.round(r.s_x*100)/100)+","+t.toDisplayString(Math.round(r.s_y*100)/100),1)])]),!c.seeModel&&!t.unref(H)&&!t.unref($)&&t.unref(y)===null&&t.unref(v)===null?(t.openBlock(),t.createElementBlock("div",{key:0,class:"setting-box",style:t.normalizeStyle({display:r.showPop?"flex":"none"}),onMousedown:t.withModifiers(g=>null,["prevent","stop"])},[t.createVNode(ce,{iconObj:c.settingIcon,onClick:t.withModifiers(g=>gt(r),["prevent","stop"])},null,8,["iconObj","onClick"])],36)):t.createCommentVNode("",!0),r.showPop?(t.openBlock(),t.createElementBlock("div",{key:1,class:"setting-box-pop",onMousedown:t.withModifiers(g=>null,["prevent","stop"])},[t.renderSlot(o.$slots,"setPopNormal",{data:N(r)},()=>[t.createElementVNode("div",{class:"setting-box-pop-item",onClick:g=>_t(r.id,r.inGroupId)},"移出组合",8,St),t.createElementVNode("div",{class:"setting-box-pop-item",onClick:g=>je(r.id,r.inGroupId)},"复制",8,Bt),t.createElementVNode("div",{class:"setting-box-pop-item",onClick:g=>pe(r.id,r.inGroupId)},"删除",8,Ct)])],32)):t.createCommentVNode("",!0)],6))),128))],2)],64)):(t.openBlock(),t.createElementBlock("div",Dt,[t.renderSlot(o.$slots,"item",{data:e},()=>[t.createElementVNode("p",null,t.toDisplayString(Math.round(e.s_width*100)/100)+","+t.toDisplayString(Math.round(e.s_height*100)/100),1),t.createElementVNode("p",null,t.toDisplayString(Math.round(e.s_x*100)/100)+","+t.toDisplayString(Math.round(e.s_y*100)/100),1)])])),!e.isGroup&&e.notGroup!==!0&&t.unref($)?(t.openBlock(),t.createElementBlock("div",{key:2,class:t.normalizeClass(["group-checkbox",e.checked?"is-checked":"",e.checkDis?"disabled":""]),onClick:r=>e.checkDis?null:lo(e)},null,10,Pt)):t.createCommentVNode("",!0),!c.seeModel&&!t.unref(H)&&!t.unref($)&&t.unref(y)===null&&t.unref(v)===null?(t.openBlock(),t.createElementBlock("div",{key:3,class:t.normalizeClass(["setting-box",e.isGroup===!0?e.btnPosition==="right"?"only-g":e.btnPosition==="left"?"only-g l":e.btnPosition==="top"?"only-g t":e.btnPosition==="bottom"?"only-g b":e.btnPosition==="center"?"only-g c":"":""]),style:t.normalizeStyle({display:e.showPop||e.showSet?"flex":"none"}),onMousedown:t.withModifiers(r=>null,["prevent","stop"])},[t.createVNode(ce,{iconObj:c.settingIcon,onClick:t.withModifiers(r=>gt(e),["prevent","stop"])},null,8,["iconObj","onClick"])],38)):t.createCommentVNode("",!0),e.showPop?(t.openBlock(),t.createElementBlock("div",{key:4,class:t.normalizeClass(["setting-box-pop",e.isGroup===!0?e.btnPosition==="right"?"special":e.btnPosition==="left"?"special l":e.btnPosition==="top"?"special t":e.btnPosition==="bottom"?"special b":e.btnPosition==="center"?"special c":"":""]),onMousedown:t.withModifiers(r=>null,["prevent","stop"])},[e.isGroup===!0?t.renderSlot(o.$slots,"setPopSpecial",{key:0,data:N(e)},()=>[t.createElementVNode("div",{class:"setting-box-pop-item",onClick:r=>et(e.id,e.static!==!0)},t.toDisplayString(e.static===!0?"解除":"")+"锁定 ",9,Nt),e.static!==!0?(t.openBlock(),t.createElementBlock("div",{key:0,class:"setting-box-pop-item",onClick:r=>Re(e.id)}," 微调 ",8,zt)):t.createCommentVNode("",!0),c.hideTit?t.createCommentVNode("",!0):(t.openBlock(),t.createElementBlock("div",{key:1,class:"setting-box-pop-item",onClick:r=>{Ze(e.id),m("showTitPop",e.groupTit,e.id)}}," 设置组合标题 ",8,Vt)),t.createElementVNode("div",{class:"setting-box-pop-item",onClick:r=>Pe(e.id)},"解除组合",8,It)]):t.renderSlot(o.$slots,"setPopNormal",{key:1,data:N(e)},()=>[e.notGroup!==!0?(t.openBlock(),t.createElementBlock("div",{key:0,class:"setting-box-pop-item",onClick:r=>yt(e.id)},"组合",8,Tt)):t.createCommentVNode("",!0),t.createElementVNode("div",{class:"setting-box-pop-item",onClick:r=>et(e.id,e.static!==!0)},t.toDisplayString(e.static===!0?"解除":"")+"锁定 ",9,Gt),e.static!==!0?(t.openBlock(),t.createElementBlock("div",{key:1,class:"setting-box-pop-item",onClick:r=>Re(e.id)}," 微调 ",8,Ot)):t.createCommentVNode("",!0),t.createElementVNode("div",{class:"setting-box-pop-item",onClick:r=>je(e.id)},"复制",8,At),t.createElementVNode("div",{class:"setting-box-pop-item",onClick:r=>pe(e.id)},"删除",8,Lt)])],34)):t.createCommentVNode("",!0)]),!c.seeModel&&!t.unref(H)&&!t.unref($)&&!e.showPop&&!(e.isGroup&&e.groupData.filter(r=>r.showPop).length>0)&&!e.move&&e.static!==!0&&e.resizable!==!1?(t.openBlock(),t.createElementBlock(t.Fragment,{key:0},[t.unref(L).indexOf("topLeft")!==-1?(t.openBlock(),t.createElementBlock("div",{key:0,class:"resize-line top-left",onMousedown:t.withModifiers(r=>re(r,e,"top-left"),["prevent","stop"])},null,40,Rt)):t.createCommentVNode("",!0),t.unref(L).indexOf("top")!==-1?(t.openBlock(),t.createElementBlock("div",{key:1,class:"resize-line top",onMousedown:t.withModifiers(r=>re(r,e,"top"),["prevent","stop"])},null,40,Ht)):t.createCommentVNode("",!0),t.unref(L).indexOf("topRight")!==-1?(t.openBlock(),t.createElementBlock("div",{key:2,class:"resize-line top-right",onMousedown:t.withModifiers(r=>re(r,e,"top-right"),["prevent","stop"])},null,40,Yt)):t.createCommentVNode("",!0),t.unref(L).indexOf("left")!==-1?(t.openBlock(),t.createElementBlock("div",{key:3,class:"resize-line left",onMousedown:t.withModifiers(r=>re(r,e,"left"),["prevent","stop"])},null,40,Xt)):t.createCommentVNode("",!0),t.unref(L).indexOf("right")!==-1?(t.openBlock(),t.createElementBlock("div",{key:4,class:"resize-line right",onMousedown:t.withModifiers(r=>re(r,e,"right"),["prevent","stop"])},null,40,$t)):t.createCommentVNode("",!0),t.unref(L).indexOf("bottomLeft")!==-1?(t.openBlock(),t.createElementBlock("div",{key:5,class:"resize-line bottom-left",onMousedown:t.withModifiers(r=>re(r,e,"bottom-left"),["prevent","stop"])},null,40,Wt)):t.createCommentVNode("",!0),t.unref(L).indexOf("bottom")!==-1?(t.openBlock(),t.createElementBlock("div",{key:6,class:"resize-line bottom",onMousedown:t.withModifiers(r=>re(r,e,"bottom"),["prevent","stop"])},null,40,Ft)):t.createCommentVNode("",!0),t.unref(L).indexOf("bottomRight")!==-1?(t.openBlock(),t.createElementBlock("div",{key:7,class:"resize-line bottom-right",onMousedown:t.withModifiers(r=>re(r,e,"bottom-right"),["prevent","stop"])},null,40,Kt)):t.createCommentVNode("",!0)],64)):t.createCommentVNode("",!0)],42,mt)],6))),128)),(t.openBlock(!0),t.createElementBlock(t.Fragment,null,t.renderList(t.unref(s),(e,n)=>(t.openBlock(),t.createElementBlock("div",{class:t.normalizeClass(["shadow-bg",t.unref(y)!==null?"":"not-move-animate",e.move?"is-move":"",e.drag?"is-drag":""]),style:t.normalizeStyle({width:e.s_width-t.unref(A)*2+"px",height:e.s_height-t.unref(K)*2+"px",top:e.s_y+t.unref(K)+"px",left:e.s_x+t.unref(A)+"px"}),key:n},null,6))),128)),t.unref(y)!==null||t.unref(v)?(t.openBlock(),t.createElementBlock("div",{key:0,class:"drag-bg",style:t.normalizeStyle({width:t.unref(d).s_width+"px",height:t.unref(d).s_height+"px",top:t.unref(d).s_y+"px",left:t.unref(d).s_x+"px"})},null,4)):t.createCommentVNode("",!0),t.createElementVNode("div",{class:"height-bg",style:t.normalizeStyle({height:(t.unref(oe)>0?t.unref(oe)*X()+(c.seeModel?c.seeModelMinBg:220):0)+"px"})},null,4),c.showAuxiliary?(t.openBlock(),t.createElementBlock(t.Fragment,{key:1},[t.unref(xe)!==null?(t.openBlock(),t.createElementBlock("div",{key:0,class:"auxiliary-line hor",style:t.normalizeStyle({top:t.unref(xe)+"px",left:"0px"})},null,4)):t.createCommentVNode("",!0),t.unref(we)!==null?(t.openBlock(),t.createElementBlock("div",{key:1,class:"auxiliary-line hor",style:t.normalizeStyle({top:t.unref(we)+"px",left:"0px"})},null,4)):t.createCommentVNode("",!0),t.unref(ke)!==null?(t.openBlock(),t.createElementBlock("div",{key:2,class:"auxiliary-line hor",style:t.normalizeStyle({top:t.unref(ke)+"px",left:"0px"})},null,4)):t.createCommentVNode("",!0),t.unref(ve)!==null?(t.openBlock(),t.createElementBlock("div",{key:3,class:"auxiliary-line",style:t.normalizeStyle({top:"0px",left:t.unref(ve)+"px",height:t.unref(oe)*X()+220+"px"})},null,4)):t.createCommentVNode("",!0),t.unref(me)!==null?(t.openBlock(),t.createElementBlock("div",{key:4,class:"auxiliary-line",style:t.normalizeStyle({top:"0px",left:t.unref(me)+"px",height:t.unref(oe)*X()+220+"px"})},null,4)):t.createCommentVNode("",!0),t.unref(be)!==null?(t.openBlock(),t.createElementBlock("div",{key:5,class:"auxiliary-line",style:t.normalizeStyle({top:"0px",left:t.unref(be)+"px",height:t.unref(oe)*X()+220+"px"})},null,4)):t.createCommentVNode("",!0)],64)):t.createCommentVNode("",!0),t.unref(s).length===0?(t.openBlock(),t.createElementBlock("div",qt,[t.renderSlot(o.$slots,"empty",{},()=>[l[0]||(l[0]=t.createTextVNode(" 暂无数据 "))])])):t.createCommentVNode("",!0)],512)],4))}}],rt={install(c){Ut.forEach(w=>{c.component("vueDragComponentPlus",w)})}};return typeof window<"u"&&window.Vue&&window.Vue.use(rt),rt});
