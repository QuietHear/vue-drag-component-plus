(function(t,ie){typeof exports=="object"&&typeof module<"u"?module.exports=ie(require("vue")):typeof define=="function"&&define.amd?define(["vue"],ie):(t=typeof globalThis<"u"?globalThis:t||self,t.vueDragComponentPlus=ie(t.Vue))})(this,function(t){"use strict";const ie={__name:"icon",props:{iconObj:{type:Object,requured:!0}},setup(a){return(w,V)=>{const E=t.resolveComponent("el-icon");return a.iconObj.type==="custom"?(t.openBlock(),t.createBlock(t.resolveDynamicComponent(a.iconObj.icon),t.normalizeProps(t.mergeProps({key:0},a.iconObj.attrs)),null,16)):a.iconObj.type==="el"?(t.openBlock(),t.createBlock(E,t.normalizeProps(t.mergeProps({key:1},a.iconObj.attrs)),{default:t.withCtx(()=>[(t.openBlock(),t.createBlock(t.resolveDynamicComponent(a.iconObj.icon)))]),_:1},16)):a.iconObj.type==="iconfont"?(t.openBlock(),t.createElementBlock("i",t.mergeProps({key:2,class:["icon iconfont","icon-"+a.iconObj.icon]},a.iconObj.attrs),null,16)):(t.openBlock(),t.createElementBlock("i",t.mergeProps({key:3,class:a.iconObj.type},a.iconObj.attrs),t.toDisplayString(a.iconObj.icon),17))}}},Ue=(a,w={x:"x",y:"y",width:"width",height:"height"})=>{let V=null;return a instanceof Array?(V=[],a.forEach(E=>{typeof E[w.x]=="number"&&typeof E[w.y]=="number"&&typeof E[w.width]=="number"&&typeof E[w.height]=="number"&&V.push({x:E[w.x],y:E[w.y],width:E[w.width],height:E[w.height]})})):typeof a[w.width]=="number"&&typeof a[w.height]=="number"&&(V={width:a[w.width],height:a[w.height]}),V},dt=a=>{const w=new Map;return a.forEach(V=>{w.has(V.x)||w.set(V.x,[]),w.get(V.x).push(V)}),w},ut=(a,w)=>a.filter(V=>V.x<=w.x&&V.x+V.width>w.x||V.x>w.x&&V.x<w.x+w.width),ft=(a,w,V,E=!1)=>{if(w.width>V)return null;let m=[];if(a.length===0){const G={x:0,y:0};return E?[G]:G}const I=Math.max(...a.map(G=>G.y+G.height)),B=new Set([0]);a.forEach(G=>{B.add(G.y),B.add(G.y+G.height)});const Ge=Array.from(B).sort((G,h)=>G-h);for(const G of Ge){const h=G+w.height;if(h>I)continue;const R=a.filter(s=>s.y<h&&s.y+s.height>G);if(R.length===0){const s={x:0,y:G};if(!E)return s;m.push(s);continue}const P=R.map(s=>[s.x,s.x+s.width]);P.sort((s,j)=>s[0]-j[0]);const N=[];let[Y,W]=P[0];for(let s=1;s<P.length;s++){const[j,O]=P[s];j<=W?W=Math.max(W,O):(N.push([Y,W]),[Y,W]=[j,O])}if(N.push([Y,W]),N[0][0]>=w.width){const s={x:0,y:G};if(!E)return s;m.push(s)}let D=N[0][1];for(let s=1;s<N.length;s++){if(N[s][0]-D>=w.width){const O={x:D,y:G};if(!E)return O;m.push(O)}D=Math.max(D,N[s][1])}if(V-D>=w.width){const s={x:D,y:G};if(!E)return s;m.push(s)}}return E?(dt(m).forEach((h,R)=>{if(h.length>1)for(let P=0;P<h.length-1;P++){let N={...w,...h[P]};ut(a.filter(Y=>Y.y>=N.y+N.height&&Y.y<=h[P+1].y),N).length===0&&(m=m.filter(Y=>!(Y.x===h[P+1].x&&Y.y===h[P+1].y)),h.splice(P,1),P--)}}),m.sort((h,R)=>h.y!==R.y?h.y-R.y:h.x-R.x),m.length===0?null:m):null},to="",pt={class:"content-box"},gt=["onMousedown","onMouseenter","onMouseleave"],yt={class:"com-item-box"},_t=["title"],xt={class:"com-item-box-content"},wt=["onClick"],kt=["onClick"],mt=["onClick"],vt={key:1,class:"com-item-box-content"},Et=["onClick"],bt=["onClick"],Mt=["onClick"],St=["onClick"],Bt=["onClick"],Ct=["onClick"],Dt=["onClick"],Pt=["onClick"],Nt=["onClick"],zt=["onClick"],Vt=["onMousedown"],It=["onMousedown"],Gt=["onMousedown"],Tt=["onMousedown"],At=["onMousedown"],Ot=["onMousedown"],Lt=["onMousedown"],Ht=["onMousedown"],Xt={key:2,class:"com-empty"},$t=[{__name:"index",props:{insertResizeKeys:{type:Array,default:()=>["topLeft","top","topRight","left","right","bottomLeft","bottom","bottomRight"]},excludeResizeKeys:{type:Array,default:()=>[]},mobileDragModel:{type:Boolean,default:!1},seeModel:{type:Boolean,default:!1},seeModelMinBg:{type:Number,default:50,validator(a,w){return a>=0}},itemMinWidth:{type:Number,default:50,validator(a,w){return a>=20}},itemMinHeight:{type:Number,default:50,validator(a,w){return a>=20}},xSpace:{type:Number,default:10,validator(a,w){return a>=0}},ySpace:{type:Number,default:null,validator(a,w){return a>=0}},hScaleDiscount:{type:Number,default:.2,validator(a,w){return a>0}},cssScaleMin:{type:Number,default:.75,validator(a,w){return a>0}},cssScaleMax:{type:Number,default:1.2,validator(a,w){return a>0&&a>=(w?w.cssScaleMin:.1)}},settingIcon:{type:Object,default:()=>({icon:"设置"})},hideTit:{type:Boolean,default:!1},showAuxiliary:{type:Boolean,default:!1},groupBtnPosMore:{type:Boolean,default:!1},beforeAddGroup:{type:Function,default:a=>a},beforeRemoveGroup:{type:Function,default:a=>a},dragDelayTime:{type:Number,default:200,validator(a,w){return a>=0&&a<1e3}}},emits:["baseWidthInit","changeScale","changeCssScale","changeTrimModel","dragStart","dragIng","dragEnd","resizeStart","resizeIng","resizeEnd","showGroup","openSetMenu","updateChecked","showTitPop","domStart","domReady"],setup(a,{expose:w,emit:V}){const E=V,m=a,I=o=>{if(typeof o=="object"&&!t.isVNode(o)&&o!==null&&!(o instanceof Date)){let l=o instanceof Array?[]:{};for(let e in o)l[e]=typeof o[e]=="object"&&!t.isVNode(o[e])&&o[e]!==null&&!(o[e]instanceof Date)?I(o[e]):o[e];return l}else return o},B=o=>{let l={};if(o instanceof Array)l=[],o.forEach(e=>{l.push(B(e))});else for(let e in o)["id","move","drag","itemMinWidth","width","s_width","itemMinHeight","height","s_height","x","s_x","y","s_y","isGroup","groupTit","groupData","inGroupId","groupW","groupH","groupX","groupY"].indexOf(e)!==-1&&(e==="groupData"?l[e]=B(o[e]):l[e]=o[e]);return l},Ge=(o,l)=>{let e=o.matches||o.webkitMatchesSelector||o.mozMatchesSelector||o.msMatchesSelector;for(;o&&!e.call(o,l);)o=o.parentElement;return o},G=(o,l)=>o.classList?o.classList.contains(l):new RegExp("\\s"+l+"\\s").test(" "+o.className+" "),h=o=>parseFloat(o.toFixed(7)),R=(o,l)=>{let e=[],n=r=>{r.forEach(i=>{G(i,l)&&e.push(i),i.childNodes&&i.childNodes.length>0&&n(i.childNodes)})};return n(o.childNodes),e},P=(o,l,e=!1)=>Y(N(o,l,e),l,e),N=(o,l,e=!1)=>o.filter(n=>h(n[e?"s_x":"x"])<=h(l[e?"s_x":"x"])&&h(n[e?"s_x":"x"]+n[e?"s_width":"width"])>h(l[e?"s_x":"x"])||h(n[e?"s_x":"x"])>h(l[e?"s_x":"x"])&&h(n[e?"s_x":"x"])<h(l[e?"s_x":"x"]+l[e?"s_width":"width"])),Y=(o,l,e=!1)=>o.filter(n=>h(n[e?"s_y":"y"])<=h(l[e?"s_y":"y"])&&h(n[e?"s_y":"y"]+n[e?"s_height":"height"])>h(l[e?"s_y":"y"])||h(n[e?"s_y":"y"])>h(l[e?"s_y":"y"])&&h(n[e?"s_y":"y"])<h(l[e?"s_y":"y"]+l[e?"s_height":"height"])),W=(o,l=n=>n,e=!1)=>{const n=B(s.value),r=B(o);r.sort((g,p)=>{const v=h(g[e?"s_y":"y"]),z=h(p[e?"s_y":"y"]);if(v!==z)return v-z;{const d=h(g[e?"s_x":"x"]),C=h(p[e?"s_x":"x"]);return d-C}});const i=g=>{P(l(n,g),g,e).forEach(v=>{v[e?"s_y":"y"]=g[e?"s_y":"y"]+g[e?"s_height":"height"],i(v)})};r.forEach(g=>i(n.filter(p=>p.id===g.id)[0])),n.forEach(g=>{s.value.filter(p=>p.id===g.id)[0][e?"s_y":"y"]=g[e?"s_y":"y"]})},D=o=>{const l=I(o);return delete l.showPop,delete l.showSet,l.groupData?l.groupData.forEach(e=>{delete e.showPop,delete e.showSet,re(e,l),delete e.s_width,delete e.s_height,delete e.s_x,delete e.s_y}):l.inGroupId&&(delete l.showPop,delete l.showSet,re(l,s.value.filter(e=>e.id===l.inGroupId)[0])),delete l.btnPosition,delete l.s_width,delete l.s_height,delete l.s_x,delete l.s_y,delete l.syCopy,l},s=t.ref([]),j=()=>{m.insertResizeKeys.forEach(o=>{m.excludeResizeKeys.indexOf(o)===-1&&O.value.push(o)})};t.watch(()=>[m.insertResizeKeys,m.excludeResizeKeys],()=>{j()});const O=t.ref([]);j();const Qe=()=>{s.value.length>0&&s.value.filter(o=>o.isGroup===!0).forEach(o=>{ne(o)})},Ze=()=>{m.xSpace!==null&&m.xSpace!==void 0?A.value=m.xSpace/2:A.value=10/2,m.ySpace!==null&&m.ySpace!==void 0&&m.ySpace>=0?F.value=m.ySpace/2:F.value=A.value,Qe()};t.watch(()=>[m.xSpace,m.ySpace],()=>{Ze()});const A=t.ref(0),F=t.ref(0);Ze();const L=t.ref(null);let Q=null;const fe=o=>{Q=o,E("baseWidthInit",Q)},q=t.ref(1),pe=t.ref(1),ae=o=>{q.value=o,o<m.cssScaleMin?pe.value=m.cssScaleMin:o>m.cssScaleMax?pe.value=m.cssScaleMax:pe.value=o,E("changeScale",q.value),E("changeCssScale",m.seeModel?pe.value:1)},X=()=>1+(q.value-1)*m.hScaleDiscount;t.watch(()=>m.seeModel,()=>{ae(q.value)});const ne=(o,l=null)=>{l?(o.width=o.width*l,o.height=o.height*l):(o.s_width=o.width*q.value,o.s_height=o.height*X());const e=getComputedStyle(L.value),n=parseInt(e.getPropertyValue("--com-item-border-width").trim()),r=parseInt(e.getPropertyValue("--group-tit-height").trim());if(o.isGroup===!0)if(l){const i=o.width,g=o.height-(o.groupTit?r:0);o.groupData.forEach(p=>{p.width=i*p.groupW,p.height=g*p.groupH,p.x=i*p.groupX,p.y=g*p.groupY})}else{const i=o.s_width-2*A.value-2*n,g=o.s_height-2*F.value-2*n-(o.groupTit?r:0);o.groupData.forEach(p=>{p.s_width=i*p.groupW,p.s_height=g*p.groupH,p.s_x=i*p.groupX,p.s_y=g*p.groupY})}},je=(o,l=null)=>{l?(o.s_x=o.x*l,o.s_y=o.y*l):(o.s_x=o.x*q.value,o.s_y=o.y*X())},Rt=o=>{o.width=o.s_width/q.value,o.height=o.s_height/X();const l=getComputedStyle(L.value),e=parseInt(l.getPropertyValue("--group-tit-height").trim());if(o.isGroup===!0){const n=o.width,r=o.height-(o.groupTit?e:0);o.groupData.forEach(i=>{i.x=n*i.groupX,i.y=r*i.groupY})}},ge=o=>{o.x=o.s_x/q.value,o.y=o.s_y/X()};let ee=null,et=null;const te=t.ref(0),ye=t.ref(null),_e=t.ref(null),xe=t.ref(null),we=t.ref(null),ke=t.ref(null),me=t.ref(null),se=o=>{const l=B(o);if(!m.showAuxiliary||o===null)ye.value=null,_e.value=null,xe.value=null,we.value=null,ke.value=null,me.value=null;else{const e=getComputedStyle(L.value),n=parseInt(e.getPropertyValue("--auxiliary-width").trim()),r=s.value.filter(u=>u.id!==l.id).map(u=>Math.round(u.s_y)),i=s.value.filter(u=>u.id!==l.id).map(u=>Math.round(u.s_y+u.s_height/2)),g=s.value.filter(u=>u.id!==l.id).map(u=>Math.round(u.s_y+u.s_height)),p=[...r,...i,...g];p.sort(),p.filter(u=>u===Math.round(l.s_y)).length>0?ye.value=l.s_y:ye.value=null,p.filter(u=>u===Math.round(l.s_y+l.s_height/2)).length>0?_e.value=l.s_y+l.s_height/2:_e.value=null,p.filter(u=>u===Math.round(l.s_y+l.s_height)).length>0?xe.value=l.s_y+l.s_height-n:xe.value=null;const v=s.value.filter(u=>u.id!==l.id).map(u=>Math.round(u.s_x)),z=s.value.filter(u=>u.id!==l.id).map(u=>Math.round(u.s_x+u.s_width/2)),d=s.value.filter(u=>u.id!==l.id).map(u=>Math.round(u.s_x+u.s_width)),C=[...v,...z,...d];C.sort(),C.filter(u=>u===Math.round(l.s_x)).length>0?we.value=l.s_x:we.value=null,C.filter(u=>u===Math.round(l.s_x+l.s_width/2)).length>0?ke.value=l.s_x+l.s_width/2:ke.value=null,C.filter(u=>u===Math.round(l.s_x+l.s_width)).length>0?me.value=l.s_x+l.s_width-n:me.value=null}},ce=()=>{window.removeEventListener("keydown",ce),_!==null?De():b!==null&&Le()},H=t.ref(!1),Te=o=>{let l=null;if(l=s.value.filter(e=>e.id===o)[0],l&&l.static!==!0&&l.dragable!==!1)H.value=!0,lt(s.value.findIndex(e=>e.id===o)),setTimeout(()=>{window.addEventListener("click",ve),window.addEventListener("keydown",Ae)},50),E("changeTrimModel",H.value,D(s.value.filter(e=>e.id===l.id)[0]));else try{}catch{}},Ae=o=>{switch(o.keyCode){case 13:case 27:case 32:ve();break;case 37:he("left");break;case 38:he("top");break;case 39:he("right");break;case 40:he("bottom");break}},ve=()=>{window.removeEventListener("click",ve),window.removeEventListener("keydown",Ae),De(),H.value=!1,E("changeTrimModel",H.value)},f=t.ref({});let _=null,tt=null,ot=null,Oe=null,Z=null;const lt=(o,l)=>{if(clearTimeout(Oe),clearTimeout(Z),Be(),H.value)Z=null,_=o,f.value=B(s.value[_]),E("dragStart",D(s.value[_])),s.value[_].move=!0,se(s.value[_]);else{const e=Ge(o.target,".com-item");e&&(Z=setTimeout(()=>{Z=null,_=l,f.value=B(s.value[_]),E("dragStart",D(s.value[_])),s.value[_].move=!0,se(s.value[_]),tt=o.clientX-e.offsetLeft,ot=o.clientY-e.offsetTop,window.addEventListener("mousemove",he),window.addEventListener("keydown",ce)},m.dragDelayTime),window.addEventListener("mouseup",De))}},he=o=>{clearTimeout(Oe),clearTimeout(Z),Z=null;let l=null,e=null;if(H.value){const z=R(L.value,"i"+s.value[_].id+"d")[0];switch(l=z.offsetLeft,e=z.offsetTop,o){case"top":e-=1;break;case"bottom":e+=1;break;case"left":l-=1;break;case"right":l+=1;break}}else l=o.clientX-tt,e=o.clientY-ot;const n=l<=oe("left")?oe("left"):l>=oe("right")?oe("right"):l,r=e<=oe("top")?oe("top"):e>=oe("bottom")?oe("bottom"):e,i=n-s.value[_].s_x,g=r-s.value[_].s_y;let p="";i>0?p="right":i<0?p="left":g>0?p="bottom":g<0&&(p="top"),s.value[_].s_x=n,s.value[_].s_y=r;let v=P(B(s.value.filter(z=>z.move!==!0)),s.value[_],!0);if(v.length===0)f.value.s_x=n,f.value.s_y=r;else switch(p){case"top":const z=I(f.value);z.s_x=n,P(B(s.value.filter(c=>c.move!==!0)),z,!0).length===0&&(f.value.s_x=n);const d=v.filter(c=>m.mobileDragModel?h(c.s_height+c.s_y-r)>2*F.value:s.value[_].s_height>=c.s_height&&r-c.s_y<=15||s.value[_].s_height<c.s_height&&r-c.s_y<=s.value[_].s_height/2);if(d.length>0){const c=N(B(s.value.filter(y=>y.move!==!0&&h(y.s_y+y.s_height)<=h(f.value.s_y)&&d.filter(M=>M.id===y.id).length===0)),f.value,!0);let x=s.value[_].s_height;if(c.length===0&&(x-=Math.min(...d.map(y=>y.s_y))),v.length===d.length?f.value.s_y=c.length===0?0:Math.max(...c.map(y=>y.s_y+y.s_height)):f.value.s_y=Math.max(...c.map(y=>y.s_y+y.s_height)),f.value.s_x=n,x>0){const y=I(d);d.forEach(M=>{N(s.value.filter(T=>T.move!==!0&&h(T.s_y)>=h(M.s_y+M.s_height)),M,!0).forEach(T=>{y.filter(qe=>qe.id===T.id).length===0&&y.push(B(T))})}),y.forEach(M=>{v.length!==d.length&&d.filter(S=>S.id===M.id).length===1&&(M.s_y=f.value.s_y),M.s_y+=x,s.value.filter(S=>S.id===M.id)[0].s_y=M.s_y})}}break;case"bottom":const C=I(f.value);C.s_x=n,P(B(s.value.filter(c=>c.move!==!0)),C,!0).length===0&&(f.value.s_x=n);const u=v.filter(c=>m.mobileDragModel?h(r+s.value[_].s_height-c.s_y)>2*F.value:s.value[_].s_height>=c.s_height&&c.s_y+c.s_height-r-s.value[_].s_height<=15||s.value[_].s_height<c.s_height&&c.s_y+c.s_height-r-s.value[_].s_height<=c.s_height/2);if(u.length>0){u.forEach(y=>{const M=N(B(s.value.filter(S=>S.move!==!0&&h(S.s_y+S.s_height)<=h(y.s_y))),y,!0);y.s_y=M.length===0?0:Math.max(...M.map(S=>S.s_y+S.s_height)),s.value.filter(S=>S.id===y.id)[0].s_y=y.s_y});const c=[...P(u,s.value[_],!0),...N(B(s.value.filter(y=>y.move!==!0&&h(y.s_y+y.s_height)<=h(s.value[_].s_y+s.value[_].s_height))),s.value[_],!0)];let x=Math.max(...c.map(y=>y.s_y+y.s_height))-f.value.s_y;if(f.value.s_y=Math.max(...c.map(y=>y.s_y+y.s_height)),f.value.s_x=n,x>0){const y=N(s.value.filter(M=>M.move!==!0&&h(M.s_y)>=h(f.value.s_y)),f.value,!0);B(y).forEach(M=>{N(s.value.filter(T=>T.move!==!0&&h(T.s_y)>=h(M.s_y+M.s_height)),M,!0).forEach(T=>{y.filter(qe=>qe.id===T.id).length===0&&y.push(B(T))})}),y.forEach(M=>{M.s_y+=x,s.value.filter(S=>S.id===M.id)[0].s_y=M.s_y})}}break;case"left":case"right":const k=v.filter(c=>c.s_x+c.s_width-n>=A.value*2&&n+s.value[_].s_width-c.s_x>=A.value*2).filter(c=>r<c.s_y||r>=c.s_y&&r-c.s_y<=15).sort((c,x)=>{const y=h(c.s_y),M=h(x.s_y);return y-M});if(k.length>0)f.value.s_x=n,f.value.s_y=Math.min(...k.map(c=>c.s_y));else{let c=B(s.value[_]);if(c.s_y=Math.min(...v.map(x=>x.s_y))-c.s_height,f.value.s_y>=Math.min(...v.map(x=>x.s_y+x.s_height))||c.s_y>=0&&P(B(s.value.filter(x=>x.move!==!0)),c,!0).length===0){const x=I(f.value);x.s_x=n,P(B(s.value.filter(y=>y.move!==!0)),x,!0).length===0&&(f.value.s_x=n)}}k.forEach(c=>{const x=f.value.s_y+f.value.s_height-c.s_y>0?f.value.s_y+f.value.s_height-c.s_y:0,y=I([c]);N(s.value.filter(S=>S.move!==!0&&h(S.s_y)>=h(c.s_y+c.s_height)),c,!0).forEach(S=>{y.filter(T=>T.id===S.id).length===0&&y.push(B(S))}),y.forEach(S=>{S.s_y+=x,k.filter(T=>T.id===S.id).length===1&&(k.filter(T=>T.id===S.id)[0].s_y=S.s_y),s.value.filter(T=>T.id===S.id)[0].s_y=S.s_y})});break}s.value.forEach(z=>{ge(z)}),ge(f.value),K(!1),se(s.value[_]),E("dragIng"),f.value.s_y=s.value[_].syCopy,delete s.value[_].syCopy},De=()=>{window.removeEventListener("mouseup",De),clearTimeout(Z),Z?Z=null:(window.removeEventListener("mousemove",he),delete s.value[_].move,s.value[_].s_x=f.value.s_x,s.value[_].s_y=f.value.s_y,se(null),s.value.forEach(o=>{ge(o)}),K(),E("dragEnd",D(s.value[_])),_=null,ce(),Oe=setTimeout(()=>{K()},500))},oe=o=>{switch(o){case"top":return 0;case"right":return ee-A.value*2-s.value[_].s_width;case"bottom":return 999999999;case"left":return 0}};let b=null,U="",Pe=0,Ne=0,Ee=0,be=0,ze=0,Me=0;const le=(o,l,e)=>{Be(),f.value=B(l),b=l,E("resizeStart",D(b)),U=e,Pe=o.clientX,Ne=o.clientY,Ee=l.s_width,be=l.s_height,ze=l.s_y,Me=l.s_x,b.drag=!0,se(b),window.addEventListener("mousemove",rt),window.addEventListener("mouseup",Le),window.addEventListener("keydown",ce)},rt=o=>{const l=Ee+(o.clientX-Pe),e=be+(o.clientY-Ne),n=Ee-(o.clientX-Pe),r=be-(o.clientY-Ne),i=ze+(o.clientY-Ne),g=Me+(o.clientX-Pe),p=(typeof f.value.itemMinWidth=="number"?f.value.itemMinWidth:m.itemMinWidth)*q.value,v=(typeof f.value.itemMinHeight=="number"?f.value.itemMinHeight:m.itemMinHeight)*X();U.indexOf("top")!==-1?(f.value.s_height=r<v?v:r>J("top")?J("top"):r,f.value.s_y=r<v?ze+be-v:r>J("top")?0:i):U.indexOf("bottom")!==-1&&(f.value.s_height=e<v?v:e>J("bottom")?J("bottom"):e),U.indexOf("left")!==-1?(f.value.s_width=n<p?p:n>J("left")?J("left"):n,f.value.s_x=n<p?Me+Ee-p:n>J("left")?0:g):U.indexOf("right")!==-1&&(f.value.s_width=l<p?p:l>J("right")?J("right"):l);let z=P(B(s.value.filter(k=>k.drag!==!0)),f.value,!0);if(z.length>0){let k=[];if(U.indexOf("top")!==-1){const c=z.filter(x=>h(x.s_y+x.s_height-f.value.s_y)>A.value*2);c.length>0&&(b.s_height=f.value.s_height,b.s_y=f.value.s_y,k=[...k,...c])}else if(U.indexOf("bottom")!==-1){const c=z.filter(x=>h(f.value.s_y+f.value.s_height-x.s_y)>F.value*2);c.length>0&&(b.s_height=f.value.s_height,k=[...k,...c])}if(U.indexOf("left")!==-1){const c=z.filter(x=>h(x.s_x+x.s_width-f.value.s_x)>A.value*2);c.length>0&&(b.s_width=f.value.s_width,b.s_x=f.value.s_x,k=[...k,...c])}else if(U.indexOf("right")!==-1){const c=z.filter(x=>h(f.value.s_x+f.value.s_width-x.s_x)>A.value*2);c.length>0&&(b.s_width=f.value.s_width,k=[...k,...c])}if(k.length>0){k.sort((c,x)=>{const y=h(c.s_y),M=h(x.s_y);return y-M});for(let c=0;c<k.length;c++)k.filter(x=>x.id===k[c].id).forEach(x=>{x.s_y+=b.s_y+b.s_height-x.s_y,s.value.filter(y=>y.id===x.id)[0].s_y=x.s_y,W([x],(y,M)=>y.filter(S=>S.drag!==!0&&S.id!==M.id),!0)})}}else b.s_x=f.value.s_x,b.s_y=f.value.s_y,b.s_width=f.value.s_width,b.s_height=f.value.s_height;const d=getComputedStyle(L.value),C=parseInt(d.getPropertyValue("--com-item-border-width").trim()),u=parseInt(d.getPropertyValue("--group-tit-height").trim());if(b.isGroup===!0){const k=b.s_width-2*A.value-2*C,c=b.s_height-2*F.value-2*C-(b.groupTit?u:0);b.groupData.forEach(x=>{x.s_width=k*x.groupW,x.s_height=c*x.groupH,x.s_x=k*x.groupX,x.s_y=c*x.groupY})}Rt(b),s.value.forEach(k=>{ge(k)}),K(!1),se(b),E("resizeIng")},Le=o=>{delete b.drag,U="",se(null),window.removeEventListener("mousemove",rt),window.removeEventListener("mouseup",Le),K(),E("resizeEnd",D(b)),b=null,ce()},J=o=>{switch(o){case"top":return ze+be;case"left":return Me+Ee;case"right":return ee-A.value*2-Me;case"bottom":return 999999999}},K=(o=!0)=>{o===!0&&W(s.value,(e,n)=>e.filter(r=>r.id!==n.id)),Yt(o),s.value.forEach(e=>{(o===!0||e.move!==!0&&e.drag!==!0)&&je(e)}),o===!0&&Wt();const l=s.value.map(e=>e.y+e.height);l.length>0?te.value=Math.max(...l):te.value=0},Yt=(o=!0)=>{const l=B(s.value).sort((e,n)=>{const r=h(e.y),i=h(n.y);return r-i});if(!o){if(b!==null){const e=N(I(l.filter(r=>r.drag!==!0&&h(r.s_y+r.s_height)<h(b.s_y))),b),n=l.filter(r=>r.drag===!0)[0];n&&(e.length>0?(n.height+=n.y-Math.max(...e.map(r=>r.y+r.height)),n.y=Math.max(...e.map(r=>r.y+r.height))):(n.height+=n.y,n.y=0))}else if(_!==null){const e=l.filter(n=>n.move===!0)[0];e&&(e.s_x=f.value.s_x,e.s_y=f.value.s_y,ge(e))}}for(let e=0;e<l.length;e++){const n=N(l,l[e]).filter(r=>h(r.y+r.height)<=h(l[e].y));n.length>0?l[e].y=Math.max(...n.map(r=>r.y+r.height)):l[e].y=0}l.forEach(e=>{o===!0||e.move!==!0&&e.drag!==!0?s.value.filter(n=>n.id===e.id)[0].y=e.y:e.move===!0&&(s.value.filter(n=>n.id===e.id)[0].syCopy=e.y*X())})},Wt=()=>{const o=s.value.filter(l=>l.isGroup===!0);if(o.length>0){const l=getComputedStyle(L.value),e=parseInt(l.getPropertyValue("--setting-icon-group-width").trim()),n=parseInt(l.getPropertyValue("--setting-icon-group-height").trim());o.forEach(r=>{A.value+r.s_x+r.s_width+e>ee?A.value+r.s_x-e<0?m.groupBtnPosMore?F.value+r.s_y-n<0?r.btnPosition="bottom":r.btnPosition="top":r.btnPosition="center":r.btnPosition="left":r.btnPosition="right"})}},nt=new ResizeObserver(o=>{Ut(ee===o[0].borderBoxSize[0].inlineSize?null:o[0].borderBoxSize[0].inlineSize,et===o[0].borderBoxSize[0].blockSize?null:o[0].borderBoxSize[0].blockSize)});t.onMounted(()=>{nt.observe(L.value)});const Se=t.ref("");let He=0,Xe=0,$e=null,Re=!1;const Ft=(o=[],l=null)=>{clearInterval($e),Se.value=new Date().getTime()+"",He=0,Xe=0,o.forEach(e=>{He+=1,e.isGroup===!0&&(Xe+=e.groupData.length)}),ht(),E("domStart"),s.value=I(o),s.value.filter(e=>e.isGroup===!0).forEach(e=>{if(e.groupData.length<2)Ce(e.id);else{const n=Ie(e.groupData,e);Ve(n)}}),Re=!0,t.nextTick(()=>{const e=L.value.getBoundingClientRect();l!=null&&s.value.length>0?(fe(l),ae(e.width/l)):(fe(s.value.length>0?e.width:null),ae(1)),s.value.forEach(n=>{ne(n)}),K(),$e=setInterval(()=>{R(L.value,Se.value+"p").length===He&&R(L.value,Se.value+"c").length===Xe&&(clearInterval($e),E("domReady"))},10),setTimeout(()=>{Re=!1},500)})},Kt=o=>{o.showSet=!0},Ye=o=>{const l=s.value.filter(e=>e.id===o);if(l.length===1)delete l[0].showSet;else try{}catch{}},st=(o,l,e)=>{const n=Ue(o),r=Ue(l),i=ft(r,n,e);if(i)o.x=i.x,o.y=i.y;else{o.x=0;const g=r.map(p=>p.y+p.height);if(g.length>0)o.y=Math.max(...g);else try{}catch{}}},de=(o,l=null,e=!1)=>{const n=I(o),r=s.value.filter(i=>i.id===l);if(n.id||(n.id=new Date().getTime()+""),l&&r.length!==1)try{}catch{}finally{return}if(e!==!0&&(delete n.x,delete n.y,l?(r[0].groupData.forEach(i=>{re(i,r[0])}),st(n,r[0].groupData,r[0].width)):st(n,s.value,(Q||ee)-A.value*2)),l){r[0].groupData.push(n);const i=Ie(r[0].groupData,r[0]);Ve(i),W([i],(g,p)=>g.filter(v=>v.id!==p.id))}else n.x!==void 0&&n.y!==void 0&&(s.value.length===0&&fe(ee),ne(n),s.value.push(n));K()},We=(o,l=null,e=null)=>{let n=null;const r=s.value.filter(i=>i.id===l);if(l?r.length===1&&(n=I(r[0].groupData.filter(i=>i.id===o)[0])):n=I(s.value.filter(i=>i.id===o)[0]),n)return n.id=e||new Date().getTime()+"",l?(re(n,r[0]),de(n,l)):de(n),D(l?s.value.filter(i=>i.id===l)[0].groupData.filter(i=>i.id===n.id)[0]:s.value.filter(i=>i.id===n.id)[0]);try{}catch{}finally{return null}},ue=(o,l=null,e=!0)=>{let n=-1;const r=s.value.filter(i=>i.id===l);if(l?r.length===1&&(n=r[0].groupData.findIndex(i=>i.id===o)):n=s.value.findIndex(i=>i.id===o),n!==-1){if(l)if(r[0].groupData.splice(n,1),r[0].groupData.length===1)Ce(l);else{r[0].groupData.forEach(g=>{re(g,r[0])});const i=Ie(r[0].groupData,r[0]);Ve(i)}else s.value.splice(n,1),s.value.length===0&&e&&(fe(null),ae(1));e&&K()}else try{}catch{}},qt=o=>{Ve(o,!1)},Ve=(o,l=!0)=>{if(o.id){const e=I(o);let n=-1;const r=s.value.filter(i=>i.id===e.inGroupId);if(e.inGroupId?r.length===1&&(n=r[0].groupData.findIndex(i=>i.id===e.id)):n=s.value.findIndex(i=>i.id===e.id),n!==-1){if(l&&(delete e.showPop,delete e.showSet,delete e.btnPosition,e.groupData&&e.groupData.forEach(i=>{delete i.showPop,delete i.showSet})),e.inGroupId){if(l)r[0].groupData[n]=e;else try{delete r[0].showPop,delete r[0].showSet,delete r[0].btnPosition,r[0].groupData&&r[0].groupData.forEach(i=>{delete i.showPop,delete i.showSet});for(let i in e){const g=i.split(".");let p=r[0].groupData[n];for(let v=0;v<g.length;v++)if(v===g.length-1)p[g[v]]=e[i];else if(p=p[g[v]],!p)throw new Error(i)}}catch{try{}catch{}}ne(r[0])}else{if(l)s.value[n]=e;else try{delete s.value[n].showPop,delete s.value[n].showSet,delete s.value[n].btnPosition,s.value[n].groupData&&s.value[n].groupData.forEach(i=>{delete i.showPop,delete i.showSet});for(let i in e){const g=i.split(".");let p=s.value[n];for(let v=0;v<g.length;v++)if(v===g.length-1)p[g[v]]=e[i];else if(p=p[g[v]],!p)throw new Error(i)}}catch{try{}catch{}}ne(s.value[n])}K()}else try{}catch{}}else try{}catch{}},Fe=(o,l=!1)=>{let e=null;if(e=s.value.filter(n=>n.id===o)[0],e)return typeof l=="boolean"?e.static=l:l&&typeof l=="object"&&(typeof l.static=="boolean"&&(e.static=l.static),typeof l.dragable=="boolean"&&(e.dragable=l.dragable),typeof l.resizable=="boolean"&&(e.resizable=l.resizable)),D(s.value.filter(n=>n.id===e.id)[0]);try{}catch{}finally{return null}},Ut=(o,l)=>{o!==null&&(ee=o,Re||(ae(Q&&ee?o/Q:1),s.value.forEach(e=>{ne(e)}),K())),l!==null&&(et=l)},it=o=>{o.showPop||(s.value.forEach(l=>{delete l.showPop,l.groupData&&l.groupData.forEach(e=>{delete e.showPop})}),E("openSetMenu",D(o)),o.showPop=!0,window.addEventListener("click",Be))},Be=()=>{s.value.forEach(o=>{delete o.showPop,o.groupData&&o.groupData.forEach(l=>{delete l.showPop})}),window.removeEventListener("click",Be)},$=t.ref(!1),at=o=>{const l=s.value.findIndex(e=>e.id===o);if(l!==-1)s.value[l].checked=!0,s.value[l].checkDis=!0,$.value=!0,E("showGroup",$.value);else try{}catch{}},Ke=()=>{$.value=!1,s.value.forEach(o=>{delete o.checked,delete o.checkDis,o.groupData&&o.groupData.forEach(l=>{delete l.checked,delete l.checkDis})}),E("showGroup",$.value)},Jt=o=>{o.checked=!o.checked,E("updateChecked",s.value.filter(l=>l.checked).length)},Ie=(o,l)=>{const e=I(o),n=I(l);e.sort((d,C)=>{const u=h(d.x),k=h(C.x);return u-k});for(let d=0;d<e.length-1;d++){if(d===0&&e[d].x>0){const C=e[d].x;for(let u=d;u<e.length;u++)e[u].x-=C}if(e[d+1].x>e[d].x+e[d].width){const C=B(e.slice(0,d+1));if(e[d+1].x>Math.max(...C.map(u=>u.x+u.width))){const u=e[d+1].x-Math.max(...C.map(k=>k.x+k.width));for(let k=d+1;k<e.length;k++)e[k].x-=u}}}e.sort((d,C)=>{const u=h(d.y),k=h(C.y);return u-k});for(let d=0;d<e.length-1;d++){if(d===0&&e[d].y>0){const C=e[d].y;for(let u=d;u<e.length;u++)e[u].y-=C}if(e[d+1].y>e[d].y+e[d].height){const C=B(e.slice(0,d+1));if(e[d+1].y>Math.max(...C.map(u=>u.y+u.height))){const u=e[d+1].y-Math.max(...C.map(k=>k.y+k.height));for(let k=d+1;k<e.length;k++)e[k].y-=u}}}const r=e.map(d=>d.x+d.width),i=Math.max(...r),g=e.map(d=>d.y+d.height),p=Math.max(...g);e.forEach(d=>{d.inGroupId||(d.inGroupId=n.id),d.groupW=d.width/i,d.groupH=d.height/p,d.groupX=d.x/i,d.groupY=d.y/p,d.isObstacle=d.x+d.width===i&&d.y===0,delete d.width,delete d.height});const v=getComputedStyle(L.value),z=parseInt(v.getPropertyValue("--group-tit-height").trim());return n.width=i,n.height=p+(n.groupTit?z:0),n.groupData=[...e],n},re=(o,l)=>{const e=getComputedStyle(L.value),n=parseInt(e.getPropertyValue("--group-tit-height").trim());o.width=l.width*o.groupW,o.height=(l.height-(l.groupTit?n:0))*o.groupH},Qt=()=>{t.nextTick(()=>{Qe()})},Zt=()=>{let o=s.value.filter(l=>l.checked);if(o.length>1)if(o=m.beforeAddGroup(I(o)),typeof o=="object"&&o instanceof Array&&o.length>0&&o.filter(l=>l.id).length===o.length){const l={id:new Date().getTime()+"G",isGroup:!0,groupTit:""},e=Ie(o,l);return e.groupData.forEach(n=>{ue(n.id,null,!1)}),de(e),Ke(),D(s.value.filter(n=>n.id===e.id)[0])}else try{}catch{}finally{return null}else return Ke(),null},ct=(o,l)=>{const e=s.value.filter(n=>n.id===l)[0];if(e){let n=e.groupData.filter(r=>r.id===o)[0];if(n){if(e.groupData.length===2)return Ce(l);if(n=m.beforeRemoveGroup(I([n])),typeof n=="object"&&n instanceof Array&&n.length===1&&n.filter(r=>r.id).length===1)return n=n[0],re(n,e),delete n.inGroupId,delete n.groupW,delete n.groupH,delete n.groupX,delete n.groupY,delete n.isObstacle,ue(n.id,e.id),de(n),[D(s.value.filter(r=>r.id===o)[0])];try{}catch{}finally{return[]}}else try{}catch{}finally{return[]}}else try{}catch{}finally{return[]}},Ce=o=>{const l=s.value.filter(e=>e.id===o)[0];if(l){let e=[],n=!0;try{l.groupData.forEach(r=>{if(r=m.beforeRemoveGroup(I([l])),typeof r=="object"&&r instanceof Array&&r.length===1&&r.filter(i=>i.id).length===1)r=r[0];else throw n=!1,new Error})}catch{}if(n){ue(l.id,null,!1),l.groupData.forEach(i=>{re(i,l),i.x+=l.x,i.y+=l.y,delete i.inGroupId,delete i.groupW,delete i.groupH,delete i.groupX,delete i.groupY,delete i.isObstacle,e.push(i.id),de(i,null,!0)});let r=[];return e.forEach(i=>{r.push(D(s.value.filter(g=>g.id===i)[0]))}),r}else return[]}else try{}catch{}finally{return[]}},jt=(o="",l)=>{const e=s.value.filter(n=>n.id===l)[0];if(e){if(!e.groupTit||!o){const n=getComputedStyle(L.value),r=parseInt(n.getPropertyValue("--group-tit-height").trim());e.groupTit&&!o&&(e.height-=r,e.s_height-=r*X()),!e.groupTit&&o&&(e.height+=r,e.s_height+=r*X())}e.groupTit=o,W([e],(n,r)=>n.filter(i=>i.id!==r.id)),K()}else try{}catch{}},ht=()=>{s.value=[],fe(null),ae(1),te.value=0},eo=(o=null)=>new Promise((l,e)=>{s.value.forEach(r=>{delete r.showPop,delete r.showSet,r.groupData&&r.groupData.forEach(i=>{delete i.showPop,delete i.showSet})});const n=I(s.value);n.forEach(r=>{r.isGroup===!0&&r.groupData.forEach(i=>{re(i,r),delete i.s_width,delete i.s_height,delete i.s_x,delete i.s_y}),delete r.btnPosition,delete r.s_width,delete r.s_height,delete r.s_x,delete r.s_y}),o&&Q&&n.forEach(r=>{ne(r,o/Q),je(r,o/Q)}),l({data:n,width:o||Q})});return t.onBeforeUnmount(()=>{nt.unobserve(L.value),window.removeEventListener("click",Be),window.removeEventListener("click",ve),window.removeEventListener("keydown",Ae),window.removeEventListener("keydown",ce)}),w({init:Ft,addItem:de,copyItem:We,deleteItem:ue,updateItem:qt,toggleLockItem:Fe,hideGroupSet:Ye,openGroup:at,closeGroup:Ke,changeGroupBorder:Qt,addGroup:Zt,removeGroupItem:ct,removeGroup:Ce,changeGroupTit:jt,openTrimModel:Te,closeTrimModel:ve,resetData:ht,getData:eo}),(o,l)=>(t.openBlock(),t.createElementBlock("div",{class:"vue-drag-component-plus",style:t.normalizeStyle({"--item-scale":t.unref(q),"--css-scale":a.seeModel?t.unref(pe):1,"--com-x-space":t.unref(A)+"px","--com-y-space":t.unref(F)+"px"}),ref_key:"pageRef",ref:L},[t.createElementVNode("div",pt,[(t.openBlock(!0),t.createElementBlock(t.Fragment,null,t.renderList(t.unref(s),(e,n)=>(t.openBlock(),t.createElementBlock("div",{class:t.normalizeClass(["com-item",t.unref(_)!==null?"":"not-move-animate",e.move?"is-move":"",e.drag?"is-drag":"",e.showPop||e.isGroup&&e.groupData.filter(r=>r.showPop).length>0?"on-top":"",t.unref(Se)+"p","i"+e.id+"d"]),style:t.normalizeStyle({width:e.s_width+"px",height:e.s_height+"px",top:e.s_y+"px",left:e.s_x+"px"}),key:n},[t.createElementVNode("div",{class:t.normalizeClass(["com-item-inner",a.seeModel||t.unref(H)||t.unref($)||e.static===!0||e.dragable===!1?"":"can-drag",e.move||e.drag?"always-hover":"",a.seeModel?"no-hover":""]),onMousedown:t.withModifiers(r=>a.seeModel||t.unref(H)||t.unref($)||e.static===!0||e.dragable===!1?null:lt(r,n),["prevent"]),onMouseenter:r=>a.seeModel||t.unref(H)||t.unref($)||t.unref(_)!==null||t.unref(b)||!e.isGroup?null:Kt(e),onMouseleave:r=>a.seeModel||t.unref(H)||t.unref($)||t.unref(_)!==null||t.unref(b)||!e.isGroup?null:Ye(e.id)},[t.createElementVNode("div",yt,[e.isGroup?(t.openBlock(),t.createElementBlock(t.Fragment,{key:0},[e.groupTit?(t.openBlock(),t.createElementBlock("div",{key:0,class:"group-item-tit",title:e.groupTit},t.toDisplayString(e.groupTit),9,_t)):t.createCommentVNode("",!0),t.createElementVNode("div",{class:t.normalizeClass(["group-item-content",e.groupTit?"":"full"])},[(t.openBlock(!0),t.createElementBlock(t.Fragment,null,t.renderList(e.groupData,(r,i)=>(t.openBlock(),t.createElementBlock("div",{class:t.normalizeClass(["com-item-box-child",r.isObstacle?"is-obstacle":"",t.unref(Se)+"c"]),style:t.normalizeStyle({width:r.s_width+"px",height:r.s_height+"px",top:r.s_y+"px",left:r.s_x+"px"}),key:i},[t.createElementVNode("div",xt,[t.renderSlot(o.$slots,"item",{data:r},()=>[t.createElementVNode("p",null,t.toDisplayString(Math.round(r.s_width*100)/100)+","+t.toDisplayString(Math.round(r.s_height*100)/100),1),t.createElementVNode("p",null,t.toDisplayString(Math.round(r.s_x*100)/100)+","+t.toDisplayString(Math.round(r.s_y*100)/100),1)])]),!a.seeModel&&!t.unref(H)&&!t.unref($)&&t.unref(_)===null&&t.unref(b)===null?(t.openBlock(),t.createElementBlock("div",{key:0,class:"setting-box",style:t.normalizeStyle({display:r.showPop?"flex":"none"}),onMousedown:t.withModifiers(g=>null,["prevent","stop"])},[t.createVNode(ie,{iconObj:a.settingIcon,onClick:t.withModifiers(g=>it(r),["prevent","stop"])},null,8,["iconObj","onClick"])],36)):t.createCommentVNode("",!0),r.showPop?(t.openBlock(),t.createElementBlock("div",{key:1,class:"setting-box-pop",onMousedown:t.withModifiers(g=>null,["prevent","stop"])},[t.renderSlot(o.$slots,"setPopNormal",{data:D(r)},()=>[t.createElementVNode("div",{class:"setting-box-pop-item",onClick:g=>ct(r.id,r.inGroupId)},"移出组合",8,wt),t.createElementVNode("div",{class:"setting-box-pop-item",onClick:g=>We(r.id,r.inGroupId)},"复制",8,kt),t.createElementVNode("div",{class:"setting-box-pop-item",onClick:g=>ue(r.id,r.inGroupId)},"删除",8,mt)])],32)):t.createCommentVNode("",!0)],6))),128))],2)],64)):(t.openBlock(),t.createElementBlock("div",vt,[t.renderSlot(o.$slots,"item",{data:e},()=>[t.createElementVNode("p",null,t.toDisplayString(Math.round(e.s_width*100)/100)+","+t.toDisplayString(Math.round(e.s_height*100)/100),1),t.createElementVNode("p",null,t.toDisplayString(Math.round(e.s_x*100)/100)+","+t.toDisplayString(Math.round(e.s_y*100)/100),1)])])),!e.isGroup&&e.notGroup!==!0&&t.unref($)?(t.openBlock(),t.createElementBlock("div",{key:2,class:t.normalizeClass(["group-checkbox",e.checked?"is-checked":"",e.checkDis?"disabled":""]),onClick:r=>e.checkDis?null:Jt(e)},null,10,Et)):t.createCommentVNode("",!0),!a.seeModel&&!t.unref(H)&&!t.unref($)&&t.unref(_)===null&&t.unref(b)===null?(t.openBlock(),t.createElementBlock("div",{key:3,class:t.normalizeClass(["setting-box",e.isGroup===!0?e.btnPosition==="right"?"only-g":e.btnPosition==="left"?"only-g l":e.btnPosition==="top"?"only-g t":e.btnPosition==="bottom"?"only-g b":e.btnPosition==="center"?"only-g c":"":""]),style:t.normalizeStyle({display:e.showPop||e.showSet?"flex":"none"}),onMousedown:t.withModifiers(r=>null,["prevent","stop"])},[t.createVNode(ie,{iconObj:a.settingIcon,onClick:t.withModifiers(r=>it(e),["prevent","stop"])},null,8,["iconObj","onClick"])],38)):t.createCommentVNode("",!0),e.showPop?(t.openBlock(),t.createElementBlock("div",{key:4,class:t.normalizeClass(["setting-box-pop",e.isGroup===!0?e.btnPosition==="right"?"special":e.btnPosition==="left"?"special l":e.btnPosition==="top"?"special t":e.btnPosition==="bottom"?"special b":e.btnPosition==="center"?"special c":"":""]),onMousedown:t.withModifiers(r=>null,["prevent","stop"])},[e.isGroup===!0?t.renderSlot(o.$slots,"setPopSpecial",{key:0,data:D(e)},()=>[t.createElementVNode("div",{class:"setting-box-pop-item",onClick:r=>Fe(e.id,e.static!==!0)},t.toDisplayString(e.static===!0?"解除":"")+"锁定 ",9,bt),e.static!==!0?(t.openBlock(),t.createElementBlock("div",{key:0,class:"setting-box-pop-item",onClick:r=>Te(e.id)}," 微调 ",8,Mt)):t.createCommentVNode("",!0),a.hideTit?t.createCommentVNode("",!0):(t.openBlock(),t.createElementBlock("div",{key:1,class:"setting-box-pop-item",onClick:r=>{Ye(e.id),E("showTitPop",e.groupTit,e.id)}}," 设置组合标题 ",8,St)),t.createElementVNode("div",{class:"setting-box-pop-item",onClick:r=>Ce(e.id)},"解除组合",8,Bt)]):t.renderSlot(o.$slots,"setPopNormal",{key:1,data:D(e)},()=>[e.notGroup!==!0?(t.openBlock(),t.createElementBlock("div",{key:0,class:"setting-box-pop-item",onClick:r=>at(e.id)},"组合",8,Ct)):t.createCommentVNode("",!0),t.createElementVNode("div",{class:"setting-box-pop-item",onClick:r=>Fe(e.id,e.static!==!0)},t.toDisplayString(e.static===!0?"解除":"")+"锁定 ",9,Dt),e.static!==!0?(t.openBlock(),t.createElementBlock("div",{key:1,class:"setting-box-pop-item",onClick:r=>Te(e.id)}," 微调 ",8,Pt)):t.createCommentVNode("",!0),t.createElementVNode("div",{class:"setting-box-pop-item",onClick:r=>We(e.id)},"复制",8,Nt),t.createElementVNode("div",{class:"setting-box-pop-item",onClick:r=>ue(e.id)},"删除",8,zt)])],34)):t.createCommentVNode("",!0)]),!a.seeModel&&!t.unref(H)&&!t.unref($)&&!e.showPop&&!(e.isGroup&&e.groupData.filter(r=>r.showPop).length>0)&&!e.move&&e.static!==!0&&e.resizable!==!1?(t.openBlock(),t.createElementBlock(t.Fragment,{key:0},[t.unref(O).indexOf("topLeft")!==-1?(t.openBlock(),t.createElementBlock("div",{key:0,class:"resize-line top-left",onMousedown:t.withModifiers(r=>le(r,e,"top-left"),["prevent","stop"])},null,40,Vt)):t.createCommentVNode("",!0),t.unref(O).indexOf("top")!==-1?(t.openBlock(),t.createElementBlock("div",{key:1,class:"resize-line top",onMousedown:t.withModifiers(r=>le(r,e,"top"),["prevent","stop"])},null,40,It)):t.createCommentVNode("",!0),t.unref(O).indexOf("topRight")!==-1?(t.openBlock(),t.createElementBlock("div",{key:2,class:"resize-line top-right",onMousedown:t.withModifiers(r=>le(r,e,"top-right"),["prevent","stop"])},null,40,Gt)):t.createCommentVNode("",!0),t.unref(O).indexOf("left")!==-1?(t.openBlock(),t.createElementBlock("div",{key:3,class:"resize-line left",onMousedown:t.withModifiers(r=>le(r,e,"left"),["prevent","stop"])},null,40,Tt)):t.createCommentVNode("",!0),t.unref(O).indexOf("right")!==-1?(t.openBlock(),t.createElementBlock("div",{key:4,class:"resize-line right",onMousedown:t.withModifiers(r=>le(r,e,"right"),["prevent","stop"])},null,40,At)):t.createCommentVNode("",!0),t.unref(O).indexOf("bottomLeft")!==-1?(t.openBlock(),t.createElementBlock("div",{key:5,class:"resize-line bottom-left",onMousedown:t.withModifiers(r=>le(r,e,"bottom-left"),["prevent","stop"])},null,40,Ot)):t.createCommentVNode("",!0),t.unref(O).indexOf("bottom")!==-1?(t.openBlock(),t.createElementBlock("div",{key:6,class:"resize-line bottom",onMousedown:t.withModifiers(r=>le(r,e,"bottom"),["prevent","stop"])},null,40,Lt)):t.createCommentVNode("",!0),t.unref(O).indexOf("bottomRight")!==-1?(t.openBlock(),t.createElementBlock("div",{key:7,class:"resize-line bottom-right",onMousedown:t.withModifiers(r=>le(r,e,"bottom-right"),["prevent","stop"])},null,40,Ht)):t.createCommentVNode("",!0)],64)):t.createCommentVNode("",!0)],42,gt)],6))),128)),(t.openBlock(!0),t.createElementBlock(t.Fragment,null,t.renderList(t.unref(s),(e,n)=>(t.openBlock(),t.createElementBlock("div",{class:t.normalizeClass(["shadow-bg",t.unref(_)!==null?"":"not-move-animate",e.move?"is-move":"",e.drag?"is-drag":""]),style:t.normalizeStyle({width:e.s_width-t.unref(A)*2+"px",height:e.s_height-t.unref(F)*2+"px",top:e.s_y+t.unref(F)+"px",left:e.s_x+t.unref(A)+"px"}),key:n},null,6))),128)),t.unref(_)!==null||t.unref(b)?(t.openBlock(),t.createElementBlock("div",{key:0,class:"drag-bg",style:t.normalizeStyle({width:t.unref(f).s_width+"px",height:t.unref(f).s_height+"px",top:t.unref(f).s_y+"px",left:t.unref(f).s_x+"px"})},null,4)):t.createCommentVNode("",!0),t.createElementVNode("div",{class:"height-bg",style:t.normalizeStyle({height:(t.unref(te)>0?t.unref(te)*X()+(a.seeModel?a.seeModelMinBg:220):0)+"px"})},null,4),a.showAuxiliary?(t.openBlock(),t.createElementBlock(t.Fragment,{key:1},[t.unref(ye)!==null?(t.openBlock(),t.createElementBlock("div",{key:0,class:"auxiliary-line hor",style:t.normalizeStyle({top:t.unref(ye)+"px",left:"0px"})},null,4)):t.createCommentVNode("",!0),t.unref(_e)!==null?(t.openBlock(),t.createElementBlock("div",{key:1,class:"auxiliary-line hor",style:t.normalizeStyle({top:t.unref(_e)+"px",left:"0px"})},null,4)):t.createCommentVNode("",!0),t.unref(xe)!==null?(t.openBlock(),t.createElementBlock("div",{key:2,class:"auxiliary-line hor",style:t.normalizeStyle({top:t.unref(xe)+"px",left:"0px"})},null,4)):t.createCommentVNode("",!0),t.unref(we)!==null?(t.openBlock(),t.createElementBlock("div",{key:3,class:"auxiliary-line",style:t.normalizeStyle({top:"0px",left:t.unref(we)+"px",height:t.unref(te)*X()+220+"px"})},null,4)):t.createCommentVNode("",!0),t.unref(ke)!==null?(t.openBlock(),t.createElementBlock("div",{key:4,class:"auxiliary-line",style:t.normalizeStyle({top:"0px",left:t.unref(ke)+"px",height:t.unref(te)*X()+220+"px"})},null,4)):t.createCommentVNode("",!0),t.unref(me)!==null?(t.openBlock(),t.createElementBlock("div",{key:5,class:"auxiliary-line",style:t.normalizeStyle({top:"0px",left:t.unref(me)+"px",height:t.unref(te)*X()+220+"px"})},null,4)):t.createCommentVNode("",!0)],64)):t.createCommentVNode("",!0),t.unref(s).length===0?(t.openBlock(),t.createElementBlock("div",Xt,[t.renderSlot(o.$slots,"empty",{},()=>[l[0]||(l[0]=t.createTextVNode(" 暂无数据 "))])])):t.createCommentVNode("",!0)])],4))}}],Je={install(a){$t.forEach(w=>{a.component("vueDragComponentPlus",w)})}};return typeof window<"u"&&window.Vue&&window.Vue.use(Je),Je});
